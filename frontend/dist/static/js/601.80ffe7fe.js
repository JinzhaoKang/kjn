"use strict";(self["webpackChunkfeedback_analysis_enterprise"]=self["webpackChunkfeedback_analysis_enterprise"]||[]).push([[601],{4601:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var l=t(6768),s=t(4232);const i={class:"analysis-engine"},n={ref:"cpuChart",style:{height:"300px"}},o={ref:"memoryChart",style:{height:"300px"}},r={key:0,style:{color:"red","font-size":"12px","margin-top":"4px"}},u={key:1,style:{color:"#666","font-size":"12px","margin-top":"4px"}},d={class:"weight-config"},c={class:"weight-item"},g={class:"weight-item"},p={class:"weight-item"},k={key:0,class:"dimension-weights"},y={class:"weight-label"},b={class:"weight-value"},_={ref:"priorityChart",style:{height:"200px"}},f={ref:"dimensionsChart",style:{height:"200px"}},m={key:0},v={class:"task-logs"};function h(e,a,t,h,F,C){const x=(0,l.g2)("PlayCircleOutlined"),w=(0,l.g2)("a-button"),T=(0,l.g2)("ReloadOutlined"),W=(0,l.g2)("a-space"),S=(0,l.g2)("a-page-header"),A=(0,l.g2)("a-tag"),L=(0,l.g2)("a-statistic"),E=(0,l.g2)("a-card"),X=(0,l.g2)("a-col"),K=(0,l.g2)("a-row"),O=(0,l.g2)("a-select-option"),R=(0,l.g2)("a-select"),I=(0,l.g2)("a-progress"),z=(0,l.g2)("a-table"),D=(0,l.g2)("a-switch"),U=(0,l.g2)("a-form-item"),V=(0,l.g2)("a-input-number"),M=(0,l.g2)("a-slider"),Q=(0,l.g2)("a-form"),j=(0,l.g2)("a-tab-pane"),P=(0,l.g2)("InfoCircleOutlined"),Y=(0,l.g2)("a-tooltip"),$=(0,l.g2)("a-descriptions-item"),B=(0,l.g2)("a-descriptions"),H=(0,l.g2)("a-divider"),q=(0,l.g2)("BulbOutlined"),G=(0,l.g2)("a-list-item"),J=(0,l.g2)("a-list"),N=(0,l.g2)("a-tabs"),Z=(0,l.g2)("a-textarea"),ee=(0,l.g2)("a-drawer");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(S,{title:"智能分析引擎","sub-title":"配置和管理AI分析模块"},{extra:(0,l.k6)(()=>[(0,l.bF)(W,null,{default:(0,l.k6)(()=>[(0,l.bF)(w,{type:"primary",onClick:h.runFullAnalysis},{default:(0,l.k6)(()=>[(0,l.bF)(x),a[14]||(a[14]=(0,l.eW)(" 执行全量分析 "))]),_:1,__:[14]},8,["onClick"]),(0,l.bF)(w,{onClick:h.refreshStatus},{default:(0,l.k6)(()=>[(0,l.bF)(T),a[15]||(a[15]=(0,l.eW)(" 刷新状态 "))]),_:1,__:[15]},8,["onClick"])]),_:1})]),_:1}),(0,l.bF)(K,{gutter:16,class:"status-row"},{default:(0,l.k6)(()=>[(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(E,{class:"status-card"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"预处理引擎",value:h.engineStatus.preprocessing.status,"value-style":{color:h.getStatusColor(h.engineStatus.preprocessing.status)}},{suffix:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getStatusColor(h.engineStatus.preprocessing.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getStatusText(h.engineStatus.preprocessing.status)),1)]),_:1},8,["color"])]),_:1},8,["value","value-style"])]),_:1})]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(E,{class:"status-card"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"LLM分析引擎",value:h.engineStatus.llm.status,"value-style":{color:h.getStatusColor(h.engineStatus.llm.status)}},{suffix:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getStatusColor(h.engineStatus.llm.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getStatusText(h.engineStatus.llm.status)),1)]),_:1},8,["color"])]),_:1},8,["value","value-style"])]),_:1})]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(E,{class:"status-card"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"优先级引擎",value:h.engineStatus.priority.status,"value-style":{color:h.getStatusColor(h.engineStatus.priority.status)}},{suffix:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getStatusColor(h.engineStatus.priority.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getStatusText(h.engineStatus.priority.status)),1)]),_:1},8,["color"])]),_:1},8,["value","value-style"])]),_:1})]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(E,{class:"status-card"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"情感分析引擎",value:h.engineStatus.sentiment.status,"value-style":{color:h.getStatusColor(h.engineStatus.sentiment.status)}},{suffix:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getStatusColor(h.engineStatus.sentiment.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getStatusText(h.engineStatus.sentiment.status)),1)]),_:1},8,["color"])]),_:1},8,["value","value-style"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(E,{title:"分析任务队列",class:"task-queue-card"},{extra:(0,l.k6)(()=>[(0,l.bF)(W,null,{default:(0,l.k6)(()=>[(0,l.bF)(R,{modelValue:h.taskFilter,"onUpdate:modelValue":a[0]||(a[0]=e=>h.taskFilter=e),placeholder:"任务状态",allowClear:"",onChange:h.loadTasks},{default:(0,l.k6)(()=>[(0,l.bF)(O,{value:"pending"},{default:(0,l.k6)(()=>a[16]||(a[16]=[(0,l.eW)("等待中")])),_:1,__:[16]}),(0,l.bF)(O,{value:"running"},{default:(0,l.k6)(()=>a[17]||(a[17]=[(0,l.eW)("运行中")])),_:1,__:[17]}),(0,l.bF)(O,{value:"completed"},{default:(0,l.k6)(()=>a[18]||(a[18]=[(0,l.eW)("已完成")])),_:1,__:[18]}),(0,l.bF)(O,{value:"failed"},{default:(0,l.k6)(()=>a[19]||(a[19]=[(0,l.eW)("失败")])),_:1,__:[19]})]),_:1},8,["modelValue","onChange"]),(0,l.bF)(w,{onClick:h.clearCompletedTasks},{default:(0,l.k6)(()=>a[20]||(a[20]=[(0,l.eW)("清理已完成")])),_:1,__:[20]},8,["onClick"])]),_:1})]),default:(0,l.k6)(()=>[(0,l.bF)(z,{columns:h.taskColumns,"data-source":h.taskList,loading:h.taskLoading,pagination:{pageSize:10}},{bodyCell:(0,l.k6)(({column:e,record:t})=>["type"===e.key?((0,l.uX)(),(0,l.Wv)(A,{key:0,color:h.getTaskTypeColor(t.type)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getTaskTypeText(t.type)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"status"===e.key?((0,l.uX)(),(0,l.Wv)(A,{key:1,color:h.getTaskStatusColor(t.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getTaskStatusText(t.status)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"progress"===e.key?((0,l.uX)(),(0,l.Wv)(I,{key:2,percent:t.progress,size:"small"},null,8,["percent"])):(0,l.Q3)("",!0),"action"===e.key?((0,l.uX)(),(0,l.Wv)(W,{key:3},{default:(0,l.k6)(()=>[(0,l.bF)(w,{type:"link",size:"small",onClick:e=>h.viewTaskDetails(t)},{default:(0,l.k6)(()=>a[21]||(a[21]=[(0,l.eW)(" 详情 ")])),_:2,__:[21]},1032,["onClick"]),"running"===t.status||"pending"===t.status?((0,l.uX)(),(0,l.Wv)(w,{key:0,type:"link",size:"small",danger:"",onClick:e=>h.cancelTask(t)},{default:(0,l.k6)(()=>a[22]||(a[22]=[(0,l.eW)(" 取消 ")])),_:2,__:[22]},1032,["onClick"])):(0,l.Q3)("",!0),"failed"===t.status?((0,l.uX)(),(0,l.Wv)(w,{key:1,type:"link",size:"small",onClick:e=>h.retryTask(t)},{default:(0,l.k6)(()=>a[23]||(a[23]=[(0,l.eW)(" 重试 ")])),_:2,__:[23]},1032,["onClick"])):(0,l.Q3)("",!0)]),_:2},1024)):(0,l.Q3)("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),(0,l.bF)(K,{gutter:16,class:"performance-row"},{default:(0,l.k6)(()=>[(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(E,{title:"CPU使用率",class:"performance-card"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",n,null,512)]),_:1})]),_:1}),(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(E,{title:"内存使用率",class:"performance-card"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",o,null,512)]),_:1})]),_:1})]),_:1}),(0,l.bF)(E,{title:"分析配置",class:"config-card"},{default:(0,l.k6)(()=>[(0,l.bF)(N,{modelValue:h.configTab,"onUpdate:modelValue":a[12]||(a[12]=e=>h.configTab=e),type:"card"},{default:(0,l.k6)(()=>[(0,l.bF)(j,{key:"preprocessing",tab:"预处理配置"},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{model:h.analysisConfig.preprocessing,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(U,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{checked:h.analysisConfig.preprocessing.enabled,"onUpdate:checked":a[1]||(a[1]=e=>h.analysisConfig.preprocessing.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(U,{label:"批处理大小"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{value:h.analysisConfig.preprocessing.batchSize,"onUpdate:value":a[2]||(a[2]=e=>h.analysisConfig.preprocessing.batchSize=e),min:1,max:1e3,style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(U,{label:"过滤阈值"},{default:(0,l.k6)(()=>[(0,l.bF)(M,{value:h.analysisConfig.preprocessing.threshold,"onUpdate:value":a[3]||(a[3]=e=>h.analysisConfig.preprocessing.threshold=e),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(j,{key:"llm",tab:"LLM配置"},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{model:h.analysisConfig.llm,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(U,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{checked:h.analysisConfig.llm.enabled,"onUpdate:checked":a[4]||(a[4]=e=>h.analysisConfig.llm.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(U,{label:"模型选择"},{default:(0,l.k6)(()=>[(0,l.bF)(R,{value:h.analysisConfig.llm.model,"onUpdate:value":a[5]||(a[5]=e=>h.analysisConfig.llm.model=e),placeholder:"选择模型",loading:h.modelsLoading,onDropdownVisibleChange:h.onModelDropdownChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.sortedAvailableModels,e=>((0,l.uX)(),(0,l.Wv)(O,{key:e.id,value:e.id},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.id)+" "+(0,s.v_)(e.owned_by?`(${e.owned_by})`:""),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading","onDropdownVisibleChange"]),h.modelsError?((0,l.uX)(),(0,l.CE)("div",r,(0,s.v_)(h.modelsError),1)):(0,l.Q3)("",!0),h.modelsSource?((0,l.uX)(),(0,l.CE)("div",u," 数据来源: "+(0,s.v_)(h.modelsSource),1)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(U,{label:"温度参数"},{default:(0,l.k6)(()=>[(0,l.bF)(M,{value:h.analysisConfig.llm.temperature,"onUpdate:value":a[6]||(a[6]=e=>h.analysisConfig.llm.temperature=e),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),_:1}),(0,l.bF)(U,{label:"最大令牌数"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{value:h.analysisConfig.llm.maxTokens,"onUpdate:value":a[7]||(a[7]=e=>h.analysisConfig.llm.maxTokens=e),min:100,max:8e3,style:{width:"200px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(j,{key:"priority",tab:"优先级配置"},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{model:h.analysisConfig.priority,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(U,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{checked:h.analysisConfig.priority.enabled,"onUpdate:checked":a[8]||(a[8]=e=>h.analysisConfig.priority.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(U,{label:"权重配置"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[a[24]||(a[24]=(0,l.Lk)("span",null,"用户影响权重:",-1)),(0,l.bF)(M,{value:h.analysisConfig.priority.weights.userImpact,"onUpdate:value":a[9]||(a[9]=e=>h.analysisConfig.priority.weights.userImpact=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),(0,l.Lk)("div",g,[a[25]||(a[25]=(0,l.Lk)("span",null,"技术复杂度权重:",-1)),(0,l.bF)(M,{value:h.analysisConfig.priority.weights.complexity,"onUpdate:value":a[10]||(a[10]=e=>h.analysisConfig.priority.weights.complexity=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),(0,l.Lk)("div",p,[a[26]||(a[26]=(0,l.Lk)("span",null,"商业价值权重:",-1)),(0,l.bF)(M,{value:h.analysisConfig.priority.weights.businessValue,"onUpdate:value":a[11]||(a[11]=e=>h.analysisConfig.priority.weights.businessValue=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])])])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(j,{key:"decision",tab:"决策引擎"},{default:(0,l.k6)(()=>[(0,l.bF)(K,{gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(E,{title:"6维度权重配置",size:"small"},{default:(0,l.k6)(()=>[h.decisionEngineWeights?((0,l.uX)(),(0,l.CE)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.decisionEngineWeights.description,(e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"weight-item",key:a},[(0,l.Lk)("div",y,[(0,l.Lk)("span",null,(0,s.v_)(e.split(" - ")[0])+":",1),(0,l.bF)(Y,{title:e.split(" - ")[1]},{default:(0,l.k6)(()=>[(0,l.bF)(P,{style:{"margin-left":"4px",color:"#666"}})]),_:2},1032,["title"])]),(0,l.bF)(M,{modelValue:h.decisionEngineWeights.dimension_weights[a],"onUpdate:modelValue":e=>h.decisionEngineWeights.dimension_weights[a]=e,max:1,step:.05,marks:{0:"0",.25:"0.25",.5:"0.5",.75:"0.75",1:"1"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Lk)("span",b,(0,s.v_)(h.decisionEngineWeights.dimension_weights[a]),1)]))),128))])):(0,l.Q3)("",!0),(0,l.bF)(w,{type:"primary",onClick:h.saveDecisionWeights,style:{"margin-top":"16px"}},{default:(0,l.k6)(()=>a[27]||(a[27]=[(0,l.eW)(" 保存权重配置 ")])),_:1,__:[27]},8,["onClick"])]),_:1})]),_:1}),(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(E,{title:"引擎状态",size:"small"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{column:1,size:"small"},{default:(0,l.k6)(()=>[(0,l.bF)($,{label:"高级优先级引擎"},{default:(0,l.k6)(()=>[h.decisionEngineStatus.advanced_priority_engine?((0,l.uX)(),(0,l.Wv)(A,{key:0,color:"green"},{default:(0,l.k6)(()=>a[28]||(a[28]=[(0,l.eW)("正常")])),_:1,__:[28]})):((0,l.uX)(),(0,l.Wv)(A,{key:1,color:"red"},{default:(0,l.k6)(()=>a[29]||(a[29]=[(0,l.eW)("异常")])),_:1,__:[29]}))]),_:1}),(0,l.bF)($,{label:"基础优先级引擎"},{default:(0,l.k6)(()=>[h.decisionEngineStatus.priority_engine?((0,l.uX)(),(0,l.Wv)(A,{key:0,color:"green"},{default:(0,l.k6)(()=>a[30]||(a[30]=[(0,l.eW)("正常")])),_:1,__:[30]})):((0,l.uX)(),(0,l.Wv)(A,{key:1,color:"red"},{default:(0,l.k6)(()=>a[31]||(a[31]=[(0,l.eW)("异常")])),_:1,__:[31]}))]),_:1}),(0,l.bF)($,{label:"行动生成器"},{default:(0,l.k6)(()=>[h.decisionEngineStatus.action_generator?((0,l.uX)(),(0,l.Wv)(A,{key:0,color:"green"},{default:(0,l.k6)(()=>a[32]||(a[32]=[(0,l.eW)("正常")])),_:1,__:[32]})):((0,l.uX)(),(0,l.Wv)(A,{key:1,color:"red"},{default:(0,l.k6)(()=>a[33]||(a[33]=[(0,l.eW)("异常")])),_:1,__:[33]}))]),_:1})]),_:1}),(0,l.bF)(w,{onClick:h.checkDecisionEngineHealth,style:{"margin-top":"16px"}},{default:(0,l.k6)(()=>a[34]||(a[34]=[(0,l.eW)(" 检查状态 ")])),_:1,__:[34]},8,["onClick"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(H),(0,l.bF)(E,{title:"决策引擎分析概览",class:"decision-overview-card"},{default:(0,l.k6)(()=>[h.decisionAnalytics?((0,l.uX)(),(0,l.Wv)(K,{key:0,gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"总反馈数",value:h.decisionAnalytics.total_feedbacks,prefix:""},null,8,["value"])]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"已分析数",value:h.decisionAnalytics.analyzed_count,"value-style":{color:"#3f8600"}},null,8,["value"])]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"平均优先级得分",value:h.decisionAnalytics.avg_scores.priority,suffix:"分",precision:1},null,8,["value"])]),_:1}),(0,l.bF)(X,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(L,{title:"平均ROI",value:h.decisionAnalytics.avg_scores.roi,suffix:"%",precision:2,"value-style":{color:"#cf1322"}},null,8,["value"])]),_:1})]),_:1})):(0,l.Q3)("",!0),(0,l.bF)(H),(0,l.bF)(K,{gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[a[35]||(a[35]=(0,l.Lk)("h4",null,"优先级分布",-1)),(0,l.Lk)("div",_,null,512)]),_:1,__:[35]}),(0,l.bF)(X,{span:12},{default:(0,l.k6)(()=>[a[36]||(a[36]=(0,l.Lk)("h4",null,"6维度平均得分",-1)),(0,l.Lk)("div",f,null,512)]),_:1,__:[36]})]),_:1}),(0,l.bF)(H),a[37]||(a[37]=(0,l.Lk)("h4",null,"战略建议",-1)),(0,l.bF)(J,{"data-source":h.decisionAnalytics.recommendations_summary,size:"small"},{renderItem:(0,l.k6)(({item:e})=>[(0,l.bF)(G,null,{default:(0,l.k6)(()=>[(0,l.bF)(q,{style:{"margin-right":"8px",color:"#faad14"}}),(0,l.eW)(" "+(0,s.v_)(e),1)]),_:2},1024)]),_:1},8,["data-source"])]),_:1,__:[37]})]),_:1})]),_:1},8,["modelValue"]),(0,l.bF)(H),(0,l.bF)(U,null,{default:(0,l.k6)(()=>[(0,l.bF)(W,null,{default:(0,l.k6)(()=>[(0,l.bF)(w,{type:"primary",onClick:h.saveConfig},{default:(0,l.k6)(()=>a[38]||(a[38]=[(0,l.eW)(" 保存配置 ")])),_:1,__:[38]},8,["onClick"]),(0,l.bF)(w,{onClick:h.resetConfig},{default:(0,l.k6)(()=>a[39]||(a[39]=[(0,l.eW)(" 重置配置 ")])),_:1,__:[39]},8,["onClick"]),(0,l.bF)(w,{onClick:h.testConfig},{default:(0,l.k6)(()=>a[40]||(a[40]=[(0,l.eW)(" 测试配置 ")])),_:1,__:[40]},8,["onClick"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(ee,{visible:h.showTaskDrawer,"onUpdate:visible":a[13]||(a[13]=e=>h.showTaskDrawer=e),title:"任务详情",placement:"right",width:"600"},{default:(0,l.k6)(()=>[h.selectedTask?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(B,{column:2,bordered:""},{default:(0,l.k6)(()=>[(0,l.bF)($,{label:"任务ID",span:2},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.selectedTask.id),1)]),_:1}),(0,l.bF)($,{label:"任务类型"},{default:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getTaskTypeColor(h.selectedTask.type)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getTaskTypeText(h.selectedTask.type)),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)($,{label:"任务状态"},{default:(0,l.k6)(()=>[(0,l.bF)(A,{color:h.getTaskStatusColor(h.selectedTask.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.getTaskStatusText(h.selectedTask.status)),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)($,{label:"开始时间"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.selectedTask.startTime),1)]),_:1}),(0,l.bF)($,{label:"完成时间"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.selectedTask.endTime||"-"),1)]),_:1}),(0,l.bF)($,{label:"处理时长"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(h.selectedTask.duration||"-"),1)]),_:1}),(0,l.bF)($,{label:"处理进度"},{default:(0,l.k6)(()=>[(0,l.bF)(I,{percent:h.selectedTask.progress},null,8,["percent"])]),_:1})]),_:1}),(0,l.bF)(H),(0,l.Lk)("div",v,[a[41]||(a[41]=(0,l.Lk)("h4",null,"执行日志",-1)),(0,l.bF)(Z,{value:h.selectedTask.logs,rows:10,readonly:"",style:{"font-family":"monospace"}},null,8,["value"])])])):(0,l.Q3)("",!0)]),_:1},8,["visible"])])}var F=t(144),C=t(7694),x=t(9804),w=t(5966),T=t(723),W=t(2076),S=t(198),A=t(1921),L=t(4288),E={name:"AnalysisEngine",components:{PlayCircleOutlined:w.A,ReloadOutlined:T.A,InfoCircleOutlined:W.A,BulbOutlined:S.A},setup(){const e=(0,F.KR)(!1),a=(0,F.KR)(!1),t=(0,F.KR)(void 0),s=(0,F.KR)("preprocessing"),i=(0,F.KR)([]),n=(0,F.KR)(null),o=(0,F.KR)(null),r=(0,F.KR)(null),u=(0,F.KR)(null),d=(0,F.KR)(null),c=(0,F.KR)(!1),g=(0,F.KR)([]),p=(0,F.KR)(""),k=(0,F.KR)(""),y=(0,F.KR)({advanced_priority_engine:!1,priority_engine:!1,action_generator:!1}),b=(0,F.KR)(null),_=(0,F.KR)(null),f=(0,F.KR)({preprocessing:{status:"running"},llm:{status:"running"},priority:{status:"idle"},sentiment:{status:"running"}}),m=(0,F.Kh)({preprocessing:{enabled:!0,batchSize:100,threshold:.7},llm:{enabled:!0,model:"gpt-4",temperature:.3,maxTokens:2e3},priority:{enabled:!0,weights:{userImpact:.4,complexity:.3,businessValue:.3}}}),v=(0,l.EW)(()=>[...g.value].sort((e,a)=>{const t={openai:0,anthropic:1,google:2,zhipu:3,deepseek:4,grok:5,nova:6,bytedance:7,flux:8,stability:9,perplexity:10,baichuan:11,spark:12,ernie:13},l=t[e.owned_by?.toLowerCase()]??999,s=t[a.owned_by?.toLowerCase()]??999;return l!==s?l-s:e.id.localeCompare(a.id)})),h=async()=>{if(!c.value){c.value=!0,p.value="",k.value="";try{const e=await L.YP.getLLMModels(),a=e.data;a.success?(g.value=a.models||[],k.value="theturbo.ai"===a.source?"theturbo.ai (实时)":a.source,C.Ay.success(`成功获取 ${g.value.length} 个可用模型`)):(g.value=a.models||[],k.value=a.source,p.value=`获取模型列表失败: ${a.error||"未知错误"}`,C.Ay.warning("使用备用模型列表"))}catch(e){console.error("加载模型列表失败:",e),p.value=`网络错误: ${e.message}`,g.value=[{id:"gpt-4",object:"model",owned_by:"openai"},{id:"gpt-3.5-turbo",object:"model",owned_by:"openai"},{id:"claude-3-haiku",object:"model",owned_by:"anthropic"},{id:"claude-3-sonnet",object:"model",owned_by:"anthropic"}],k.value="默认列表",C.Ay.error("无法获取模型列表，使用默认选项")}finally{c.value=!1}}},w=e=>{e&&0===g.value.length&&h()},T=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"任务类型",dataIndex:"type",key:"type",width:120},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"进度",dataIndex:"progress",key:"progress",width:120},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:150},{title:"预计完成",dataIndex:"estimatedTime",key:"estimatedTime",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],W=e=>{const a={running:"#52c41a",idle:"#1890ff",error:"#f5222d",stopped:"#faad14"};return a[e]||"#d9d9d9"},S=e=>{const a={running:"运行中",idle:"空闲",error:"错误",stopped:"已停止"};return a[e]||e},E=e=>{const a={preprocessing:"blue",llm_analysis:"green",priority_analysis:"orange",sentiment_analysis:"purple",full_analysis:"red"};return a[e]||"default"},X=e=>{const a={preprocessing:"预处理",llm_analysis:"LLM分析",priority_analysis:"优先级分析",sentiment_analysis:"情感分析",full_analysis:"全量分析"};return a[e]||e},K=e=>{const a={pending:"blue",running:"processing",completed:"success",failed:"error"};return a[e]||"default"},O=e=>{const a={pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"};return a[e]||e},R=()=>{e.value=!0,setTimeout(()=>{i.value=[{id:1,type:"full_analysis",status:"running",progress:65,startTime:"2024-01-01 10:30:00",estimatedTime:"2024-01-01 11:00:00",logs:"正在执行全量分析...\n已处理65%的数据\n预计剩余时间: 15分钟"},{id:2,type:"llm_analysis",status:"completed",progress:100,startTime:"2024-01-01 09:15:00",estimatedTime:"2024-01-01 09:45:00",logs:"LLM分析任务已完成\n处理了256条反馈\n生成了分析报告"}],e.value=!1},1e3)},I=()=>{C.Ay.success("状态已刷新"),R()},z=()=>{x.A.confirm({title:"确认执行",content:"确定要执行全量分析吗？这可能需要较长时间。",onOk(){C.Ay.success("全量分析任务已启动"),R()}})},D=()=>{C.Ay.success("已清理完成的任务"),R()},U=e=>{n.value=e,a.value=!0},V=e=>{x.A.confirm({title:"确认取消",content:`确定要取消任务"${e.id}"吗？`,onOk(){C.Ay.success("任务已取消"),R()}})},M=e=>{C.Ay.success("任务已重新启动"),R()},Q=async()=>{try{const e=await L.YP.getSettings(),a=e.data;a.analysis&&Object.assign(m,a.analysis)}catch(e){console.error("加载配置失败:",e),C.Ay.error("加载配置失败")}},j=async()=>{try{const e=await L.YP.getSettings(),a=e.data,t={...a,analysis:m};await L.YP.updateSettings(t),C.Ay.success("配置已保存")}catch(e){console.error("保存配置失败:",e),C.Ay.error("保存配置失败")}},P=async()=>{x.A.confirm({title:"确认重置",content:"确定要重置配置为默认值吗？",onOk:async()=>{try{Object.assign(m,{preprocessing:{enabled:!0,batchSize:100,threshold:.7},llm:{enabled:!0,model:"gpt-4",temperature:.3,maxTokens:2e3},priority:{enabled:!0,weights:{userImpact:.4,complexity:.3,businessValue:.3}}}),C.Ay.success("配置已重置")}catch(e){C.Ay.error("重置配置失败")}}})},Y=()=>{C.Ay.success("配置测试通过")},$=async()=>{try{const e=await L.f0.getHealth();y.value=e.data,C.Ay.success("决策引擎状态检查完成")}catch(e){console.error("检查决策引擎状态失败:",e),C.Ay.error("检查状态失败")}},B=async()=>{try{const e=await L.f0.getWeightsConfig();b.value=e.data;const a=await L.f0.getAnalyticsOverview();_.value=a.data,await $(),(0,l.dY)(()=>{q(),G()})}catch(e){console.error("加载决策引擎数据失败:",e),C.Ay.error("加载决策引擎数据失败")}},H=async()=>{try{C.Ay.success("权重配置已保存")}catch(e){console.error("保存权重配置失败:",e),C.Ay.error("保存权重配置失败")}},q=()=>{if(u.value&&_.value){const e=A.Ts(u.value),a=Object.entries(_.value.priority_distribution).map(([e,a])=>({name:e,value:a}));e.setOption({tooltip:{trigger:"item"},series:[{type:"pie",radius:"60%",data:a,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}},G=()=>{if(d.value&&_.value){const e=A.Ts(d.value),a=_.value.six_dimensions_avg;e.setOption({tooltip:{trigger:"axis"},radar:{indicator:[{name:"影响力",max:100},{name:"紧急性",max:100},{name:"实现成本",max:100},{name:"商业价值",max:100},{name:"战略匹配",max:100},{name:"用户声音",max:100}]},series:[{type:"radar",data:[{value:[a.impact,a.urgency,a.effort,a.business_value,a.strategic,a.user_voice],name:"6维度评分"}]}]})}},J=()=>{(0,l.dY)(()=>{if(o.value){const e=A.Ts(o.value);e.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","04:00","08:00","12:00","16:00","20:00"]},yAxis:{type:"value",max:100},series:[{data:[20,35,45,60,55,40],type:"line",smooth:!0,areaStyle:{}}]})}if(r.value){const e=A.Ts(r.value);e.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","04:00","08:00","12:00","16:00","20:00"]},yAxis:{type:"value",max:100},series:[{data:[30,40,50,70,65,45],type:"line",smooth:!0,areaStyle:{}}]})}})};return(0,l.sV)(()=>{R(),Q(),J(),h(),B()}),{taskLoading:e,showTaskDrawer:a,taskFilter:t,configTab:s,taskList:i,selectedTask:n,cpuChart:o,memoryChart:r,priorityChart:u,dimensionsChart:d,engineStatus:f,analysisConfig:m,taskColumns:T,modelsLoading:c,availableModels:g,sortedAvailableModels:v,modelsError:p,modelsSource:k,loadAvailableModels:h,onModelDropdownChange:w,decisionEngineStatus:y,decisionEngineWeights:b,decisionAnalytics:_,checkDecisionEngineHealth:$,loadDecisionEngineData:B,saveDecisionWeights:H,getStatusColor:W,getStatusText:S,getTaskTypeColor:E,getTaskTypeText:X,getTaskStatusColor:K,getTaskStatusText:O,loadTasks:R,refreshStatus:I,runFullAnalysis:z,clearCompletedTasks:D,viewTaskDetails:U,cancelTask:V,retryTask:M,loadConfig:Q,saveConfig:j,resetConfig:P,testConfig:Y}}},X=t(1241);const K=(0,X.A)(E,[["render",h],["__scopeId","data-v-74246888"]]);var O=K}}]);
//# sourceMappingURL=601.80ffe7fe.js.map