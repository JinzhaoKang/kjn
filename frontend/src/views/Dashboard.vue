<template>
  <div class="dashboard-container">


    <!-- ÁªüËÆ°Âç°ÁâáÂå∫Âüü -->
    <div class="stats-section">
      <a-row :gutter="[24, 24]">
        <a-col :xs="24" :sm="12" :lg="6" v-for="stat in statistics" :key="stat.key">
          <div class="stat-card" :class="`stat-${stat.type}`">
            <div class="stat-content">
              <div class="stat-icon">
                <component :is="stat.icon" />
              </div>
              <div class="stat-info">
                <div class="stat-number">{{ stat.value }}</div>
                <div class="stat-label">{{ stat.label }}</div>
              </div>
            </div>
            <div class="stat-trend" :class="stat.trend > 0 ? 'positive' : 'negative'">
              <span class="trend-icon">
                <ArrowUpOutlined v-if="stat.trend > 0" />
                <ArrowDownOutlined v-else />
              </span>
              <span class="trend-value">{{ Math.abs(stat.trend) }}%</span>
              <span class="trend-label">ËæÉ‰∏äÊúà</span>
          </div>
          </div>
        </a-col>
      </a-row>
    </div>
    
    <!-- ÁÉ≠ËØçÂàÜÊûêÂå∫Âüü -->
    <div class="hotwords-section">
      <a-card title="ÁÉ≠ËØçÂàÜÊûê" class="hotwords-card">
        <template #extra>
          <a-space>
            <a-select v-model="hotwordsPeriod" size="small" style="width: 120px" @change="updateHotwords">
              <a-select-option value="today">‰ªäÊó•</a-select-option>
              <a-select-option value="week">Êú¨Âë®</a-select-option>
              <a-select-option value="month">Êú¨Êúà</a-select-option>
            </a-select>
            <a-button type="link" size="small">
              Êü•ÁúãÊõ¥Â§ö
            </a-button>
          </a-space>
        </template>
        
        <a-row :gutter="[24, 24]">
          <!-- Ê≠£Èù¢ÁÉ≠ËØçTOP100 -->
          <a-col :xs="24" :sm="8" :lg="6">
            <div class="hotwords-panel">
              <div class="panel-header">
                <h3 class="panel-title">
                  <span class="title-icon positive">
                    <SmileOutlined />
                  </span>
                  TOP100Ê≠£Èù¢ÁÉ≠ËØç
                </h3>
              </div>
              <div class="hotwords-list">
                <div 
                  v-for="(word, index) in positiveHotwords" 
                  :key="word.text"
                  class="hotword-item"
                  :class="{ 'top-word': index < 3 }"
                >
                  <div class="word-rank">{{ index + 1 }}</div>
                  <div class="word-content">
                    <div class="word-text">{{ word.text }}</div>
                    <div class="word-bar">
                      <div 
                        class="word-progress positive" 
                        :style="{ width: `${(word.value / positiveHotwords[0].value) * 100}%` }"
                      ></div>
                    </div>
                  </div>
                  <div class="word-count">{{ word.value.toLocaleString() }}</div>
                </div>
              </div>
            </div>
          </a-col>

          <!-- ËØç‰∫ëÂõæ -->
          <a-col :xs="24" :sm="8" :lg="12">
            <div class="wordcloud-container">
              <div class="wordcloud-header">
                <h3 class="wordcloud-title">ÁÉ≠Èó®Áü≠ËØ≠ËØç‰∫ëÂõæ</h3>
                <div class="wordcloud-stats">
                  <span class="stat-item positive">
                    <span class="stat-dot positive"></span>
                    Ê≠£Èù¢ÂèçÈ¶à
                  </span>
                  <span class="stat-item negative">
                    <span class="stat-dot negative"></span>
                    Ë¥üÈù¢ÂèçÈ¶à
                  </span>
                  <span class="stat-item neutral">
                    <span class="stat-dot neutral"></span>
                    ‰∏≠ÊÄßÂèçÈ¶à
                  </span>
                </div>
              </div>
              <canvas class="wordcloud-chart" ref="wordCloudRef"></canvas>
            </div>
          </a-col>

          <!-- Ë¥üÈù¢ÁÉ≠ËØçTOP100 -->
          <a-col :xs="24" :sm="8" :lg="6">
            <div class="hotwords-panel">
              <div class="panel-header">
                <h3 class="panel-title">
                  <span class="title-icon negative">
                    <FrownOutlined />
                  </span>
                  TOP100Ë¥üÈù¢ÁÉ≠ËØç
                </h3>
              </div>
              <div class="hotwords-list">
                <div 
                  v-for="(word, index) in negativeHotwords" 
                  :key="word.text"
                  class="hotword-item"
                  :class="{ 'top-word': index < 3 }"
                >
                  <div class="word-rank">{{ index + 1 }}</div>
                  <div class="word-content">
                    <div class="word-text">{{ word.text }}</div>
                    <div class="word-bar">
                      <div 
                        class="word-progress negative" 
                        :style="{ width: `${(word.value / negativeHotwords[0].value) * 100}%` }"
                      ></div>
                    </div>
                  </div>
                  <div class="word-count">{{ word.value.toLocaleString() }}</div>
                </div>
              </div>
            </div>
          </a-col>
        </a-row>
      </a-card>
    </div>
    
    <!-- ÂõæË°®Âå∫Âüü -->
    <div class="charts-section">
      <a-row :gutter="[24, 24]">
        <!-- ÂèçÈ¶àË∂ãÂäøÂõæ -->
        <a-col :xs="24" :lg="12">
          <a-card title="ÂèçÈ¶àË∂ãÂäøÂàÜÊûê" class="chart-card">
            <template #extra>
              <a-radio-group v-model="trendPeriod" size="small" @change="updateTrendChart">
                <a-radio-button value="7d">7Â§©</a-radio-button>
                <a-radio-button value="30d">30Â§©</a-radio-button>
                <a-radio-button value="90d">90Â§©</a-radio-button>
              </a-radio-group>
            </template>
            <div class="chart-container" ref="trendChartRef"></div>
          </a-card>
        </a-col>

        <!-- ÊÉÖÊÑüÂàÜÊûêÈ•ºÂõæ -->
        <a-col :xs="24" :lg="12">
          <a-card title="ÊÉÖÊÑüÂàÜÊûêÂàÜÂ∏É" class="chart-card">
            <template #extra>
              <a-tooltip title="Âü∫‰∫éAIÊô∫ËÉΩÊÉÖÊÑüÂàÜÊûê">
                <InfoCircleOutlined style="color: #999;" />
              </a-tooltip>
            </template>
            <div class="chart-container" ref="sentimentChartRef"></div>
          </a-card>
        </a-col>

        <!-- ÂàÜÁ±ªÁªüËÆ°Êü±Áä∂Âõæ -->
        <a-col :xs="24" :lg="16">
          <a-card title="ÂèçÈ¶àÂàÜÁ±ªÁªüËÆ°" class="chart-card">
            <template #extra>
              <a-select v-model="categoryPeriod" size="small" style="width: 120px" @change="updateCategoryChart">
                <a-select-option value="today">‰ªäÊó•</a-select-option>
                <a-select-option value="week">Êú¨Âë®</a-select-option>
                <a-select-option value="month">Êú¨Êúà</a-select-option>
              </a-select>
            </template>
            <div class="chart-container large" ref="categoryChartRef"></div>
          </a-card>
        </a-col>

        <!-- ÁÉ≠Èó®ÈóÆÈ¢òÊéíË°å -->
        <a-col :xs="24" :lg="8">
          <a-card title="ÁÉ≠Èó®ÈóÆÈ¢òÊéíË°å" class="chart-card">
            <template #extra>
              <a href="#" class="view-more">Êü•ÁúãÊõ¥Â§ö</a>
            </template>
            <div class="hot-issues-list">
              <div 
                v-for="(issue, index) in hotIssues" 
                :key="issue.id"
                class="issue-item"
                :class="{ 'top-issue': index < 3 }"
              >
                <div class="issue-rank">{{ index + 1 }}</div>
                <div class="issue-content">
                  <div class="issue-title">{{ issue.title }}</div>
                  <div class="issue-meta">
                    <a-tag :color="getIssueTypeColor(issue.type)" size="small">
                      {{ issue.type }}
                    </a-tag>
                    <span class="issue-count">{{ issue.count }}Ê¨°ÂèçÈ¶à</span>
                  </div>
                </div>
                <div class="issue-trend">
                  <div class="trend-indicator" :class="issue.trend > 0 ? 'rising' : 'falling'">
                    <CaretUpOutlined v-if="issue.trend > 0" />
                    <CaretDownOutlined v-else />
                  </div>
                </div>
              </div>
          </div>
          </a-card>
        </a-col>
      </a-row>
          </div>

    <!-- Êô∫ËÉΩË°åÂä®ËÆ°ÂàíÂå∫Âüü -->
    <div class="action-plan-section">
      <a-card title="üöÄ Êô∫ËÉΩË°åÂä®ËÆ°Âàí" class="action-plan-card">
        <template #extra>
          <a-space>
            <a-tag color="blue" v-if="actionPlan">ËÆ°ÂàíID: {{ actionPlan.plan_id }}</a-tag>
            <a-tag color="green" v-if="actionPlan">{{ actionPlan.total_actions }} ‰∏™Ë°åÂä®È°π</a-tag>
            <a-button type="link" size="small" @click="$router.push('/decision-engine')">
              Êü•ÁúãËØ¶ÊÉÖ
            </a-button>
          </a-space>
        </template>
        
        <div v-if="actionPlanLoading" class="loading-placeholder">
          <a-spin size="large">
            <template #tip>Ê≠£Âú®ÁîüÊàêÊô∫ËÉΩË°åÂä®ËÆ°Âàí...</template>
          </a-spin>
        </div>
        
        <div v-else-if="actionPlan" class="action-plan-content">
          <!-- ËÆ°ÂàíÊ¶ÇËßà -->
          <a-row :gutter="16" class="plan-overview">
            <a-col :span="6">
              <div class="metric-item priority-p0">
                <div class="metric-value">{{ actionPlan.p0_actions }}</div>
                <div class="metric-label">P0 Á¥ßÊÄ•</div>
              </div>
            </a-col>
            <a-col :span="6">
              <div class="metric-item priority-p1">
                <div class="metric-value">{{ actionPlan.p1_actions }}</div>
                <div class="metric-label">P1 ÈáçË¶Å</div>
              </div>
            </a-col>
            <a-col :span="6">
              <div class="metric-item priority-p2">
                <div class="metric-value">{{ actionPlan.p2_actions }}</div>
                <div class="metric-label">P2 Ê≠£Â∏∏</div>
              </div>
            </a-col>
            <a-col :span="6">
              <div class="metric-item priority-p3">
                <div class="metric-value">{{ actionPlan.p3_actions }}</div>
                <div class="metric-label">P3 Ê¨°Ë¶Å</div>
              </div>
            </a-col>
          </a-row>

          <!-- ÂÖ≥ÈîÆ‰ø°ÊÅØ -->
          <a-row :gutter="16" class="plan-info">
            <a-col :span="12">
              <div class="info-card timeline-info">
                <div class="info-header">‚è∞ È¢Ñ‰º∞Êó∂Èó¥Á∫ø</div>
                <div class="info-content">{{ actionPlan.estimated_timeline }}</div>
              </div>
            </a-col>
            <a-col :span="12">
              <div class="info-card effort-info">
                <div class="info-header">üë• Â∑•‰ΩúÈáè‰º∞ÁÆó</div>
                <div class="info-content">{{ actionPlan.total_effort_estimate }}</div>
              </div>
            </a-col>
          </a-row>

          <!-- ÂÖ≥ÈîÆÊ¥ûÂØü -->
          <div v-if="actionPlan.key_insights && actionPlan.key_insights.length > 0" class="insights-section">
            <div class="section-title">üí° ÂÖ≥ÈîÆÊ¥ûÂØü</div>
            <div class="insights-grid">
              <div 
                v-for="(insight, index) in actionPlan.key_insights" 
                :key="index"
                class="insight-item"
              >
                <div class="insight-content">{{ insight }}</div>
              </div>
            </div>
          </div>

          <!-- Ê†∏ÂøÉË°åÂä®È°π -->
          <div v-if="actionPlan.action_items && actionPlan.action_items.length > 0" class="actions-section">
            <div class="section-title">üéØ Ê†∏ÂøÉË°åÂä®È°π</div>
            <div class="actions-grid">
              <div 
                v-for="action in actionPlan.action_items.slice(0, 4)" 
                :key="action.id"
                class="action-card"
                :class="`priority-${action.priority.toLowerCase()}`"
              >
                <div class="action-header">
                  <div class="action-title">{{ action.title }}</div>
                  <a-tag :color="getPriorityColor(action.priority)" size="small">
                    {{ action.priority }}
                  </a-tag>
                </div>
                <div class="action-description">{{ action.description }}</div>
                <div class="action-footer">
                  <a-space>
                    <span class="action-team">üë• {{ action.owner_team }}</span>
                    <span class="action-effort">‚è≥ {{ action.estimated_effort }}</span>
                  </a-space>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div v-else class="empty-placeholder">
          <a-empty description="ÊöÇÊó†Ë°åÂä®ËÆ°ÂàíÊï∞ÊçÆ">
            <a-button type="primary" @click="loadActionPlan">ÁîüÊàêËÆ°Âàí</a-button>
          </a-empty>
        </div>
      </a-card>
    </div>

    <!-- ÊúÄÊñ∞Âä®ÊÄÅ -->
    <div class="activity-section">
      <a-row :gutter="[24, 24]">
        <a-col :xs="24" :lg="12">
          <a-card title="ÊúÄÊñ∞ÂèçÈ¶à" class="activity-card">
            <template #extra>
              <a-button type="link" size="small" @click="$router.push('/feedback')">
                Êü•ÁúãÂÖ®ÈÉ®
              </a-button>
            </template>
            <a-list :data-source="recentFeedback" :loading="loading">
              <template #renderItem="{ item }">
                <a-list-item>
                  <a-list-item-meta>
                    <template #avatar>
                      <a-avatar>{{ item.user?.charAt(0) || 'U' }}</a-avatar>
                    </template>
                    <template #title>
                      <span class="feedback-title">{{ item.title }}</span>
                      <a-tag :color="getSentimentColor(item.sentiment)" size="small" style="margin-left: 8px;">
                        {{ getSentimentLabel(item.sentiment) }}
                      </a-tag>
                    </template>
                    <template #description>
                      <div class="feedback-content">{{ item.content.substring(0, 80) }}...</div>
                      <div class="feedback-meta">
                        <span class="meta-item">
                          <ClockCircleOutlined />
                          {{ formatTime(item.createdAt) }}
                        </span>
                        <span class="meta-item">
                          <UserOutlined />
                          {{ item.user }}
                        </span>
          </div>
                    </template>
                  </a-list-item-meta>
                </a-list-item>
              </template>
            </a-list>
          </a-card>
        </a-col>

        <a-col :xs="24" :lg="12">
          <a-card title="Á≥ªÁªüÈÄöÁü•" class="activity-card">
            <template #extra>
              <a-badge :count="notifications.filter(n => !n.read).length">
                <a-button type="link" size="small">ÁÆ°ÁêÜÈÄöÁü•</a-button>
              </a-badge>
            </template>
            <a-list :data-source="notifications" :loading="loading">
              <template #renderItem="{ item }">
                <a-list-item :class="{ 'unread': !item.read }">
                  <a-list-item-meta>
                    <template #avatar>
                      <a-badge dot v-if="!item.read">
                        <div class="notification-icon" :class="`type-${item.type}`">
                          <component :is="getNotificationIcon(item.type)" />
                        </div>
                      </a-badge>
                      <div v-else class="notification-icon" :class="`type-${item.type}`">
                        <component :is="getNotificationIcon(item.type)" />
                      </div>
                    </template>
                    <template #title>
                      <span class="notification-title">{{ item.title }}</span>
                    </template>
                    <template #description>
                      <div class="notification-content">{{ item.content }}</div>
                      <div class="notification-time">
                        {{ formatTime(item.createdAt) }}
          </div>
                    </template>
                  </a-list-item-meta>
                </a-list-item>
              </template>
            </a-list>
          </a-card>
        </a-col>
      </a-row>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, nextTick } from 'vue'
import { message } from 'ant-design-vue'
import * as echarts from 'echarts'
import WordCloud from 'wordcloud'
import { decisionEngineAPI, feedbackAPI } from '@/utils/api'
import {
  ArrowUpOutlined,
  ArrowDownOutlined,
  InfoCircleOutlined,
  CaretUpOutlined,
  CaretDownOutlined,
  ClockCircleOutlined,
  UserOutlined,
  MessageOutlined,
  BellOutlined,
  WarningOutlined,
  CheckCircleOutlined,
  SmileOutlined,
  FrownOutlined
} from '@ant-design/icons-vue'

// ÂìçÂ∫îÂºèÊï∞ÊçÆ
const loading = ref(false)
const actionPlanLoading = ref(false)
const actionPlan = ref(null)
const trendPeriod = ref('30d')
const categoryPeriod = ref('week')
const hotwordsPeriod = ref('week')

// ÂõæË°®ÂºïÁî®
const trendChartRef = ref(null)
const sentimentChartRef = ref(null)
const categoryChartRef = ref(null)
const wordCloudRef = ref(null)

// ÁªüËÆ°Êï∞ÊçÆ
const statistics = ref([
  {
    key: 'total',
    type: 'primary',
    icon: MessageOutlined,
    label: 'ÊÄªÂèçÈ¶àÊï∞',
    value: '12,436',
    trend: 12.5
  },
  {
    key: 'processed',
    type: 'success',
    icon: CheckCircleOutlined,
    label: 'Â∑≤Â§ÑÁêÜ',
    value: '8,952',
    trend: 8.2
  },
  {
    key: 'pending',
    type: 'warning',
    icon: ClockCircleOutlined,
    label: 'ÂæÖÂ§ÑÁêÜ',
    value: '2,184',
    trend: -5.1
  },
  {
    key: 'critical',
    type: 'danger',
    icon: WarningOutlined,
    label: 'Á¥ßÊÄ•ÈóÆÈ¢ò',
    value: '89',
    trend: -15.3
  }
])

// ÁÉ≠Èó®ÈóÆÈ¢ò
const hotIssues = ref([
  { id: 1, title: 'ÁôªÂΩïÈ°µÈù¢Âä†ËΩΩÁºìÊÖ¢', type: 'ÊÄßËÉΩÈóÆÈ¢ò', count: 156, trend: 23 },
  { id: 2, title: 'ÊîØ‰ªòÊµÅÁ®ãÂºÇÂ∏∏', type: 'ÂäüËÉΩÈóÆÈ¢ò', count: 142, trend: -8 },
  { id: 3, title: 'ÁßªÂä®Á´ØÈÄÇÈÖçÈóÆÈ¢ò', type: 'UIÈóÆÈ¢ò', count: 98, trend: 15 },
  { id: 4, title: 'Êï∞ÊçÆÂêåÊ≠•Âª∂Ëøü', type: 'ÊäÄÊúØÈóÆÈ¢ò', count: 87, trend: 5 },
  { id: 5, title: 'Áî®Êà∑‰ΩìÈ™å‰ºòÂåñÂª∫ËÆÆ', type: 'Âª∫ËÆÆ', count: 76, trend: -12 }
])

// Âø´ÈÄüÊìç‰ΩúÊï∞ÊçÆÂ∑≤ÁßªÈô§ÔºåÁî±Êô∫ËÉΩË°åÂä®ËÆ°ÂàíÂèñ‰ª£

// ÊúÄÊñ∞ÂèçÈ¶à
const recentFeedback = ref([
  {
    id: 1,
    title: 'Ë¥≠‰π∞ÊµÅÁ®ã‰∏≠ÈÅáÂà∞ÊîØ‰ªòÈóÆÈ¢ò',
    content: 'Âú®‰ΩøÁî®ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåÈ°µÈù¢‰∏ÄÁõ¥ÊòæÁ§∫Âä†ËΩΩ‰∏≠ÔºåÊó†Ê≥ïÂÆåÊàêÊîØ‰ªòÊìç‰ΩúÔºåÂª∫ËÆÆ‰ºòÂåñÊîØ‰ªòÊµÅÁ®ãÁöÑÁ®≥ÂÆöÊÄß...',
    user: 'Âº†‰∏â',
    sentiment: 'negative',
    createdAt: new Date(Date.now() - 2 * 60 * 1000)
  },
  {
    id: 2,
    title: 'Êñ∞ÂäüËÉΩ‰ΩøÁî®‰ΩìÈ™åÂæàÂ•Ω',
    content: 'ÊúÄÊñ∞Êõ¥Êñ∞ÁöÑÊêúÁ¥¢ÂäüËÉΩÈùûÂ∏∏Â•ΩÁî®ÔºåÂìçÂ∫îÈÄüÂ∫¶Âø´ÔºåÁªìÊûúÂáÜÁ°ÆÂ∫¶È´òÔºåÂ∏åÊúõËÉΩÁªßÁª≠‰øùÊåÅ...',
    user: 'ÊùéÂõõ',
    sentiment: 'positive',
    createdAt: new Date(Date.now() - 15 * 60 * 1000)
  },
  {
    id: 3,
    title: 'Âª∫ËÆÆÂ¢ûÂä†Ê∑±Ëâ≤Ê®°Âºè',
    content: 'Â∏åÊúõÂ∫îÁî®ËÉΩÂ§üÊîØÊåÅÊ∑±Ëâ≤Ê®°ÂºèÔºåËøôÊ†∑Âú®Â§úÈó¥‰ΩøÁî®Êó∂‰ºöÊõ¥Âä†ËàíÈÄÇÔºåÂØπÁúºÁùõ‰πüÊõ¥Â•Ω...',
    user: 'Áéã‰∫î',
    sentiment: 'neutral',
    createdAt: new Date(Date.now() - 30 * 60 * 1000)
  }
])

// Á≥ªÁªüÈÄöÁü•
const notifications = ref([
  {
    id: 1,
    type: 'warning',
    title: 'Á≥ªÁªüÁª¥Êä§ÈÄöÁü•',
    content: 'Á≥ªÁªüÂ∞Ü‰∫é‰ªäÊôö22:00-23:00ËøõË°åÁª¥Êä§ÂçáÁ∫ß',
    read: false,
    createdAt: new Date(Date.now() - 10 * 60 * 1000)
  },
  {
    id: 2,
    type: 'info',
    title: 'Êñ∞ÁâàÊú¨ÂèëÂ∏É',
    content: 'v2.1.0ÁâàÊú¨Â∑≤ÂèëÂ∏ÉÔºåÊñ∞Â¢ûAIÊô∫ËÉΩÂàÜÊûêÂäüËÉΩ',
    read: false,
    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000)
  },
  {
    id: 3,
    type: 'success',
    title: 'Êï∞ÊçÆÂ§á‰ªΩÂÆåÊàê',
    content: '‰ªäÊó•Êï∞ÊçÆÂ§á‰ªΩÂ∑≤ÊàêÂäüÂÆåÊàê',
    read: true,
    createdAt: new Date(Date.now() - 6 * 60 * 60 * 1000)
  }
])

// Ê≠£Èù¢ÁÉ≠ËØçÊï∞ÊçÆ
const positiveHotwords = ref([
  { text: 'ÂÆâË£Ö', value: 18794 },
  { text: 'ÂìçÂ∫î', value: 13340 },
  { text: 'Ê∏ÖÊ¥Å', value: 8911 },
  { text: 'Ëß£Êîæ', value: 8556 },
  { text: 'Âπ≤ÂáÄ', value: 7805 },
  { text: 'ÊïàÊûú', value: 6695 },
  { text: 'ÊúçÂä°', value: 6546 },
  { text: '‰∏äÈó®', value: 6244 },
  { text: 'Â∏àÂÇÖ‰∏ì‰∏ö', value: 5890 },
  { text: 'Áâ©ÊµÅÂæàÂø´', value: 5567 },
  { text: 'Ê∏ÖÊ¥ÅÊïàÊûúÂ•Ω', value: 5234 },
  { text: 'Â∏àÂÇÖÊúçÂä°', value: 4892 },
  { text: 'ÊÄß‰ª∑ÊØîÈ´ò', value: 4556 },
  { text: 'È¢úÂÄºÈ´ò', value: 4234 },
  { text: 'ÊúçÂä°ÊÄÅÂ∫¶', value: 3987 }
])

// Ë¥üÈù¢ÁÉ≠ËØçÊï∞ÊçÆ
const negativeHotwords = ref([
  { text: 'Ê∏ÖÁêÜ', value: 1294 },
  { text: 'Âπ≤ÂáÄ', value: 1051 },
  { text: 'ÊïàÊûú', value: 762 },
  { text: 'ËÉΩÂäõ', value: 693 },
  { text: 'Êä±Âú∞', value: 668 },
  { text: 'ÊâìÊâ´', value: 565 },
  { text: 'ÂÆ¢Êúç', value: 551 },
  { text: 'Ëß£Êîæ', value: 506 },
  { text: 'Âô™Èü≥Â§ß', value: 445 },
  { text: 'Ê∏ÖÊ¥ÅÊïàÊûú‰∏çÁêÜÊÉ≥', value: 398 },
  { text: 'ÊÄß‰ª∑ÊØî‰Ωé', value: 367 },
  { text: 'Â∏àÂÇÖ‰∏ç‰∏ì‰∏ö', value: 334 },
  { text: 'Áâ©ÊµÅÊÖ¢', value: 298 },
  { text: 'ÊúçÂä°ÊÄÅÂ∫¶Â∑Æ', value: 267 },
  { text: 'ÊïÖÈöúÈ¢ëÁπÅ', value: 234 }
])

// ËØç‰∫ëÂõæÊï∞ÊçÆ
const wordCloudData = ref([
  { name: 'Ê∏ÖÊ¥ÅÂäüËÉΩ', value: 2340, sentiment: 'positive' },
  { name: 'ÊúçÂä°ÊÄÅÂ∫¶ÂæàÂ•Ω', value: 1890, sentiment: 'positive' },
  { name: 'Â∏àÂÇÖÊúçÂä°', value: 1567, sentiment: 'positive' },
  { name: 'È¢úÂÄºÈ´ò', value: 1456, sentiment: 'positive' },
  { name: 'È¢úÂÄºÂæàÈ´ò', value: 1234, sentiment: 'positive' },
  { name: 'Ê∏ÖÊ¥ÅÊïàÊûú', value: 1123, sentiment: 'positive' },
  { name: 'Áâ©ÊµÅÂæàÂø´', value: 998, sentiment: 'positive' },
  { name: 'ÊÄß‰ª∑ÊØîÈ´ò', value: 876, sentiment: 'positive' },
  { name: 'Â∏àÂÇÖÂæà‰∏ì‰∏ö', value: 756, sentiment: 'positive' },
  { name: 'Êìç‰ΩúÁÆÄÂçï', value: 654, sentiment: 'positive' },
  { name: 'Êô∫ËÉΩÈÅøÈöú', value: 543, sentiment: 'positive' },
  { name: 'Âô™Èü≥ÊéßÂà∂', value: 432, sentiment: 'neutral' },
  { name: 'Ê∏ÖÊ¥ÅÊïàÊûú‰∏çÁêÜÊÉ≥', value: 398, sentiment: 'negative' },
  { name: 'Âô™Èü≥Â§ß', value: 345, sentiment: 'negative' },
  { name: 'ÊïÖÈöúÈ¢ëÁπÅ', value: 298, sentiment: 'negative' },
  { name: 'ÊÄß‰ª∑ÊØî‰Ωé', value: 267, sentiment: 'negative' },
  { name: 'Â∏àÂÇÖ‰∏ç‰∏ì‰∏ö', value: 234, sentiment: 'negative' },
  { name: 'Ê∏ÖÊ¥ÅËÉΩÂäõÂ∑Æ', value: 198, sentiment: 'negative' },
  { name: 'Â§ñËßÇËÆæËÆ°', value: 167, sentiment: 'neutral' },
  { name: 'ÂäüËÉΩÂÖ®Èù¢', value: 145, sentiment: 'positive' }
])

// ÊñπÊ≥ï
const refreshData = async () => {
  loading.value = true
  try {
    // Ê®°ÊãüAPIË∞ÉÁî®
    await new Promise(resolve => setTimeout(resolve, 1000))
    message.success('Êï∞ÊçÆÂà∑Êñ∞ÊàêÂäü')
  } catch (error) {
    message.error('Êï∞ÊçÆÂà∑Êñ∞Â§±Ë¥•')
  } finally {
    loading.value = false
  }
}

const exportReport = () => {
  message.info('Êä•ÂëäÂØºÂá∫ÂäüËÉΩÂºÄÂèë‰∏≠...')
}

// handleQuickActionÊñπÊ≥ïÂ∑≤ÁßªÈô§ÔºåÁî±Êô∫ËÉΩË°åÂä®ËÆ°ÂàíÂèñ‰ª£

const getIssueTypeColor = (type) => {
  const colorMap = {
    'ÊÄßËÉΩÈóÆÈ¢ò': 'orange',
    'ÂäüËÉΩÈóÆÈ¢ò': 'red',
    'UIÈóÆÈ¢ò': 'blue',
    'ÊäÄÊúØÈóÆÈ¢ò': 'purple',
    'Âª∫ËÆÆ': 'green'
  }
  return colorMap[type] || 'default'
}

const getSentimentColor = (sentiment) => {
  const colorMap = {
    'positive': 'green',
    'negative': 'red',
    'neutral': 'blue'
  }
  return colorMap[sentiment] || 'default'
}

const getSentimentLabel = (sentiment) => {
  const labelMap = {
    'positive': 'ÁßØÊûÅ',
    'negative': 'Ê∂àÊûÅ',
    'neutral': '‰∏≠ÊÄß'
  }
  return labelMap[sentiment] || 'Êú™Áü•'
}

const getNotificationIcon = (type) => {
  const iconMap = {
    'warning': WarningOutlined,
    'info': BellOutlined,
    'success': CheckCircleOutlined,
    'error': WarningOutlined
  }
  return iconMap[type] || BellOutlined
}

const formatTime = (date) => {
  const now = new Date()
  const diff = now - new Date(date)
  const minutes = Math.floor(diff / (1000 * 60))
  const hours = Math.floor(diff / (1000 * 60 * 60))
  const days = Math.floor(diff / (1000 * 60 * 60 * 24))
  
  if (minutes < 60) return `${minutes}ÂàÜÈíüÂâç`
  if (hours < 24) return `${hours}Â∞èÊó∂Ââç`
  return `${days}Â§©Ââç`
}

// Âä†ËΩΩË°åÂä®ËÆ°Âàí
const loadActionPlan = async () => {
  actionPlanLoading.value = true
  try {
    // Ëé∑ÂèñÂèçÈ¶àÊï∞ÊçÆIDÂàóË°®
    const feedbackResponse = await feedbackAPI.getFeedbacks({ limit: 30 })
    const feedbackData = feedbackResponse.data.data || []
    const feedbackIds = feedbackData.map(item => item.id || item._id).filter(Boolean)
    
    if (feedbackIds.length === 0) {
      console.warn('Ê≤°ÊúâÊâæÂà∞ÂèØÂàÜÊûêÁöÑÂèçÈ¶àÊï∞ÊçÆ')
      return
    }
    
    // Ë∞ÉÁî®Ë°åÂä®ËÆ°ÂàíÁîüÊàêAPI
    const planResult = await decisionEngineAPI.generateActionPlan({
      feedback_ids: feedbackIds,
      priority_threshold: 0.4,
      include_low_priority: true
    })
    
    actionPlan.value = planResult.data
  } catch (error) {
    console.error('Ë°åÂä®ËÆ°ÂàíÁîüÊàêÂ§±Ë¥•:', error)
    // ÈùôÈªòÂ§±Ë¥•Ôºå‰∏çÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
  } finally {
    actionPlanLoading.value = false
  }
}

// Ëé∑Âèñ‰ºòÂÖàÁ∫ßÈ¢úËâ≤
const getPriorityColor = (priority) => {
  const colorMap = {
    'P0': 'red',
    'P1': 'orange', 
    'P2': 'blue',
    'P3': 'green'
  }
  return colorMap[priority] || 'default'
}

// ÂõæË°®ÂàùÂßãÂåñ
const initTrendChart = () => {
  const chart = echarts.init(trendChartRef.value)
  const option = {
      tooltip: {
        trigger: 'axis'
      },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '3%',
      containLabel: true
      },
      xAxis: {
        type: 'category',
      data: ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà']
      },
      yAxis: {
        type: 'value'
      },
    series: [
      {
        name: 'ÂèçÈ¶àÊï∞Èáè',
        type: 'line',
        smooth: true,
        data: [820, 932, 901, 934, 1290, 1330, 1320],
        areaStyle: {
          opacity: 0.3
        }
      }
    ]
  }
  chart.setOption(option)
}

const initSentimentChart = () => {
  const chart = echarts.init(sentimentChartRef.value)
  const option = {
      tooltip: {
        trigger: 'item'
      },
      legend: {
      bottom: '0%',
      left: 'center'
      },
      series: [
        {
          type: 'pie',
        radius: ['40%', '70%'],
        avoidLabelOverlap: false,
        label: {
          show: false,
          position: 'center'
        },
          emphasis: {
          label: {
            show: true,
            fontSize: 20,
            fontWeight: 'bold'
          }
        },
        labelLine: {
          show: false
        },
        data: [
          { value: 1048, name: 'ÁßØÊûÅ', itemStyle: { color: '#52c41a' } },
          { value: 735, name: '‰∏≠ÊÄß', itemStyle: { color: '#1890ff' } },
          { value: 580, name: 'Ê∂àÊûÅ', itemStyle: { color: '#f5222d' } }
        ]
        }
      ]
  }
  chart.setOption(option)
}

const initCategoryChart = () => {
  const chart = echarts.init(categoryChartRef.value)
  const option = {
    tooltip: {
      trigger: 'axis',
      axisPointer: {
        type: 'shadow'
      }
    },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '3%',
      containLabel: true
    },
    xAxis: {
      type: 'category',
      data: ['ÂäüËÉΩÈóÆÈ¢ò', 'ÊÄßËÉΩÈóÆÈ¢ò', 'UIÈóÆÈ¢ò', 'ÊäÄÊúØÈóÆÈ¢ò', 'Âª∫ËÆÆ', 'ÂÖ∂‰ªñ']
    },
    yAxis: {
      type: 'value'
    },
    series: [
      {
        name: 'ÂèçÈ¶àÊï∞Èáè',
        type: 'bar',
        data: [320, 302, 301, 334, 390, 330],
        itemStyle: {
          color: '#1890ff',
          borderRadius: [4, 4, 0, 0]
        }
      }
    ]
  }
  chart.setOption(option)
}

const updateTrendChart = () => {
  // Ê†πÊçÆÊó∂Èó¥Âë®ÊúüÊõ¥Êñ∞ÂõæË°®Êï∞ÊçÆ
  message.info(`ÂàáÊç¢Âà∞${trendPeriod.value}Êï∞ÊçÆ`)
    }

const updateCategoryChart = () => {
  // Ê†πÊçÆÊó∂Èó¥Âë®ÊúüÊõ¥Êñ∞ÂõæË°®Êï∞ÊçÆ
  message.info(`ÂàáÊç¢Âà∞${categoryPeriod.value}Êï∞ÊçÆ`)
}

// ÂàùÂßãÂåñËØç‰∫ëÂõæ
const initWordCloud = () => {
  console.log('ÂºÄÂßãÂàùÂßãÂåñËØç‰∫ëÂõæ')
  const canvas = wordCloudRef.value
  
  if (!canvas) {
    console.error('CanvasÂÖÉÁ¥†Êú™ÊâæÂà∞')
    return
  }
  
  console.log('CanvasÂÖÉÁ¥†ÊâæÂà∞ÔºåÂ∞∫ÂØ∏:', canvas.width, 'x', canvas.height)
  console.log('ËØç‰∫ëÊï∞ÊçÆ:', wordCloudData.value)
  
  // ‰ºòÂåñÁöÑÈ¢úËâ≤ÈÖçÁΩÆ - ÂèÇËÄÉÂõæ2ÁöÑÈÖçËâ≤ÊñπÊ°à
  const getWordColor = (sentiment, weight) => {
    const colors = {
      'positive': [
        '#52c41a', '#73d13d', '#95de64', '#b7eb8f', '#d9f7be',  // ÁªøËâ≤Á≥ª
        '#13c2c2', '#36cfc9', '#5cdbd3', '#87e8de', '#b5f5ec',  // ÈùíËâ≤Á≥ª
        '#1890ff', '#40a9ff', '#69c0ff', '#91d5ff', '#bae7ff'   // ËìùËâ≤Á≥ª
      ],
      'negative': [
        '#ff4d4f', '#ff7875', '#ffa39e', '#ffccc7', '#ffd8d8',  // Á∫¢Ëâ≤Á≥ª
        '#fa541c', '#ff7a45', '#ff9c6e', '#ffbb96', '#ffd6cc',  // Ê©ôÁ∫¢Ëâ≤Á≥ª
        '#eb2f96', '#f759ab', '#ff85c0', '#ffadd2', '#ffd6e7'   // Ê¥ãÁ∫¢Ëâ≤Á≥ª
      ],
      'neutral': [
        '#1890ff', '#40a9ff', '#69c0ff', '#91d5ff', '#bae7ff',  // ËìùËâ≤Á≥ª
        '#722ed1', '#9254de', '#b37feb', '#d3adf7', '#efdbff',  // Á¥´Ëâ≤Á≥ª
        '#2f54eb', '#597ef7', '#85a5ff', '#adc6ff', '#d6e4ff'   // Ê∑±ËìùËâ≤Á≥ª
      ]
    }
    
    const sentimentColors = colors[sentiment] || colors['neutral']
    // Ê†πÊçÆÊùÉÈáçÈÄâÊã©È¢úËâ≤Ê∑±ÊµÖÔºöÊùÉÈáçÈ´òÁöÑÁî®Ê∑±Ëâ≤ÔºåÊùÉÈáç‰ΩéÁöÑÁî®ÊµÖËâ≤
    const colorIndex = weight > 1000 ? Math.floor(Math.random() * 5) : 
                      weight > 500 ? Math.floor(Math.random() * 5) + 5 :
                      Math.floor(Math.random() * 5) + 10
    
    return sentimentColors[Math.min(colorIndex, sentimentColors.length - 1)]
  }
  
  // ÂáÜÂ§áËØç‰∫ëÊï∞ÊçÆÔºåÊåâÊùÉÈáçÊéíÂ∫è
  const sortedData = [...wordCloudData.value].sort((a, b) => b.value - a.value)
  const list = sortedData.map(item => [item.name, item.value])
  console.log('Â§ÑÁêÜÂêéÁöÑÂàóË°®Êï∞ÊçÆ:', list)
  
  // ÂàõÂª∫È¢úËâ≤Êï∞ÁªÑ
  const colors = sortedData.map(item => getWordColor(item.sentiment, item.value))
  console.log('È¢úËâ≤Êï∞ÁªÑ:', colors)
  
  try {
    // Ê∏ÖÁ©∫canvas
    const ctx = canvas.getContext('2d')
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    
    // ‰ºòÂåñÁöÑËØç‰∫ëÈÖçÁΩÆ - ÂèÇËÄÉÂõæ2ÁöÑÊéíÁâàÊïàÊûú
    const options = {
      list: list,
      gridSize: 4,  // ÂáèÂ∞èÁΩëÊ†ºÂ§ßÂ∞èÔºåËÆ©ËØçÊ±áÊéíÂàóÊõ¥Á¥ßÂØÜ
      weightFactor: function(size) {
        // ‰ºòÂåñÊùÉÈáçËÆ°ÁÆóÔºåËÆ©Â§ßÂ∞èÂ±ÇÊ¨°Êõ¥ÊòéÊòæ
        const maxWeight = Math.max(...list.map(item => item[1]))
        const minWeight = Math.min(...list.map(item => item[1]))
        const normalizedSize = (size - minWeight) / (maxWeight - minWeight)
        
        // Ê†πÊçÆcanvasÂ§ßÂ∞èÂä®ÊÄÅË∞ÉÊï¥Â≠ó‰ΩìÂ§ßÂ∞è
        const canvasSize = Math.min(canvas.width, canvas.height)
        const baseFontSize = canvasSize / 25
        
        return baseFontSize * (0.5 + normalizedSize * 2.5)  // Â≠ó‰ΩìÂ§ßÂ∞èËåÉÂõ¥Ôºö0.5xÂà∞3x
      },
      fontFamily: 'Microsoft YaHei, PingFang SC, Hiragino Sans GB, Arial, sans-serif',
      fontWeight: function(word, weight, fontSize) {
        // ÊùÉÈáçÈ´òÁöÑËØçÊ±á‰ΩøÁî®Âä†Á≤óÂ≠ó‰Ωì
        return weight > 1000 ? 'bold' : weight > 500 ? '600' : 'normal'
      },
      color: function(word, weight, fontSize, distance, theta) {
        const index = list.findIndex(item => item[0] === word)
        return colors[index] || '#1890ff'
      },
      backgroundColor: 'transparent',
      rotateRatio: 0.4,  // Â¢ûÂä†ÊóãËΩ¨ÊØî‰æãÔºåËÆ©Â∏ÉÂ±ÄÊõ¥ÁÅµÊ¥ª
      rotationSteps: 4,  // Â¢ûÂä†ÊóãËΩ¨Ê≠•Êï∞
      minSize: 12,       // ÊèêÈ´òÊúÄÂ∞èÂ≠ó‰ΩìÂ§ßÂ∞è
      maxSize: 60,       // ËÆæÁΩÆÊúÄÂ§ßÂ≠ó‰ΩìÂ§ßÂ∞è
      ellipticity: 0.65, // ËÆæÁΩÆÊ§≠ÂúÜÂΩ¢Áä∂Âõ†Â≠êÔºåËÆ©Â∏ÉÂ±ÄÊõ¥Á¥ßÂáë
      shape: 'circle',
      drawOutOfBound: false,
      shrinkToFit: true,
      clearCanvas: true,
      hover: function(item, dimension, event) {
        console.log('ÊÇ¨ÂÅúËØçÊ±á:', item)
        if (item) {
          // ÂàõÂª∫ÊèêÁ§∫Ê°Ü
          let tooltip = document.getElementById('wordcloud-tooltip')
          if (!tooltip) {
            tooltip = document.createElement('div')
            tooltip.id = 'wordcloud-tooltip'
            tooltip.style.cssText = `
              position: fixed;
              background: rgba(0, 0, 0, 0.85);
              color: white;
              padding: 8px 12px;
              border-radius: 6px;
              font-size: 12px;
              pointer-events: none;
              z-index: 9999;
              white-space: nowrap;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
              border: 1px solid rgba(255, 255, 255, 0.1);
            `
            document.body.appendChild(tooltip)
          }
          
          // Ëé∑ÂèñÂéüÂßãÊï∞ÊçÆ‰ø°ÊÅØ
          const originalData = sortedData.find(data => data.name === item[0])
          const sentiment = originalData?.sentiment || 'neutral'
          const sentimentText = sentiment === 'positive' ? 'Ê≠£Èù¢' : sentiment === 'negative' ? 'Ë¥üÈù¢' : '‰∏≠ÊÄß'
          const index = list.findIndex(listItem => listItem[0] === item[0])
          const color = colors[index] || '#1890ff'
          
          tooltip.innerHTML = `
            <div style="font-weight: bold; margin-bottom: 4px;">${item[0]}</div>
            <div style="color: ${color};">‚óè ${sentimentText}ÂèçÈ¶à</div>
            <div>Âá∫Áé∞Ê¨°Êï∞: <strong>${item[1].toLocaleString()}</strong></div>
          `
          tooltip.style.left = event.pageX + 10 + 'px'
          tooltip.style.top = event.pageY - 10 + 'px'
          tooltip.style.display = 'block'
        }
      },
      click: function(item, dimension, event) {
        if (item) {
          message.info(`ÁÇπÂáª‰∫ÜËØçÊ±áÔºö${item[0]} (${item[1]}Ê¨°)`)
        }
      }
    }
    
    console.log('ËØç‰∫ëÈÖçÁΩÆ:', options)
    
    // ÂàõÂª∫ËØç‰∫ë
    WordCloud(canvas, options)
    console.log('ËØç‰∫ëÂàõÂª∫ÂÆåÊàê')
    
    // Èº†Ê†áÁ¶ªÂºÄÊó∂ÈöêËóèÊèêÁ§∫Ê°Ü
    canvas.addEventListener('mouseleave', () => {
      const tooltip = document.getElementById('wordcloud-tooltip')
      if (tooltip) {
        tooltip.style.display = 'none'
      }
    })
    
  } catch (error) {
    console.error('ËØç‰∫ëÂàõÂª∫Â§±Ë¥•:', error)
    // Â¶ÇÊûúËØç‰∫ëÂàõÂª∫Â§±Ë¥•ÔºåÊòæÁ§∫ÊñáÊú¨ÊèêÁ§∫
    const ctx = canvas.getContext('2d')
    ctx.fillStyle = '#666'
    ctx.font = '16px Arial'
    ctx.textAlign = 'center'
    ctx.fillText('ËØç‰∫ëÂõæÂä†ËΩΩ‰∏≠...', canvas.width / 2, canvas.height / 2)
  }
}

// Êõ¥Êñ∞ÁÉ≠ËØçÊï∞ÊçÆ
const updateHotwords = () => {
  message.info(`ÂàáÊç¢Âà∞${hotwordsPeriod.value}ÁÉ≠ËØçÊï∞ÊçÆ`)
  // ËøôÈáåÂèØ‰ª•Ë∞ÉÁî®APIÊõ¥Êñ∞Êï∞ÊçÆ
}

// ÂÆö‰πâresizeÂ§ÑÁêÜÂáΩÊï∞ÂºïÁî®Ôºå‰æø‰∫éÊ∑ªÂä†ÂíåÁßªÈô§ÁõëÂê¨Âô®
let resizeHandler = null
let resizeTimeout = null

// Èò≤ÊäñÂáΩÊï∞ÔºåÈò≤Ê≠¢ ResizeObserver Âæ™ÁéØ
const debounceResize = (func, delay = 100) => {
  return (...args) => {
    clearTimeout(resizeTimeout)
    resizeTimeout = setTimeout(() => func.apply(this, args), delay)
  }
}

// ÁîüÂëΩÂë®Êúü
onMounted(async () => {
  await nextTick()
  
  // ÂàùÂßãÂåñÂõæË°®
  if (trendChartRef.value) initTrendChart()
  if (sentimentChartRef.value) initSentimentChart()
  if (categoryChartRef.value) initCategoryChart()
  
  // ËÆæÁΩÆcanvasÂ∞∫ÂØ∏Âπ∂ÂàùÂßãÂåñËØç‰∫ëÂõæ
  if (wordCloudRef.value) {
    const canvas = wordCloudRef.value
    const container = canvas.parentElement
    const rect = container.getBoundingClientRect()
    
    console.log('ÂÆπÂô®Â∞∫ÂØ∏:', rect.width, 'x', rect.height)
    
    // ËÆæÁΩÆËæÉÂ§ßÁöÑÂõ∫ÂÆöÂ∞∫ÂØ∏Á°Æ‰øùËÉΩÂ§üÊ∏≤Êüì
    const canvasWidth = Math.max(400, rect.width - 80)
    const canvasHeight = Math.max(300, rect.height - 120)
    
    canvas.width = canvasWidth
    canvas.height = canvasHeight
    canvas.style.width = canvasWidth + 'px'
    canvas.style.height = canvasHeight + 'px'
    canvas.style.margin = '10px auto'
    canvas.style.display = 'block'
    canvas.style.borderRadius = '8px'
    canvas.style.backgroundColor = 'transparent'
    // canvas.style.border = '1px solid #ddd' // Ë∞ÉËØïÁî®ËæπÊ°ÜÔºàÂ∑≤ÁßªÈô§Ôºâ
    
    console.log('ËÆæÁΩÆcanvasÂ∞∫ÂØ∏:', canvasWidth, 'x', canvasHeight)
    
    // Âª∂ËøüÂàùÂßãÂåñËØç‰∫ëÂõæÁ°Æ‰øùcanvasÂÆåÂÖ®ÂáÜÂ§áÂ•Ω
    setTimeout(() => {
      initWordCloud()
    }, 100)
  }
  
  // ÂÆö‰πâresizeÂ§ÑÁêÜÂáΩÊï∞
  const originalResizeHandler = () => {
    try {
      if (trendChartRef.value) echarts.getInstanceByDom(trendChartRef.value)?.resize()
      if (sentimentChartRef.value) echarts.getInstanceByDom(sentimentChartRef.value)?.resize()
      if (categoryChartRef.value) echarts.getInstanceByDom(categoryChartRef.value)?.resize()
      
      // ÈáçÊñ∞ËÆæÁΩÆËØç‰∫ëÂõæcanvasÂ∞∫ÂØ∏Âπ∂ÈáçÊñ∞Ê∏≤Êüì
      if (wordCloudRef.value) {
        const canvas = wordCloudRef.value
        const container = canvas.parentElement
        if (container) {
          const rect = container.getBoundingClientRect()
          
          const canvasWidth = Math.max(400, rect.width - 80)
          const canvasHeight = Math.max(300, rect.height - 120)
          
          canvas.width = canvasWidth
          canvas.height = canvasHeight
          canvas.style.width = canvasWidth + 'px'
          canvas.style.height = canvasHeight + 'px'
          
          // ÈáçÊñ∞ÂàùÂßãÂåñËØç‰∫ëÂõæ
          setTimeout(() => {
            initWordCloud()
          }, 100)
        }
      }
    } catch (error) {
      console.warn('ResizeÂ§ÑÁêÜÂáΩÊï∞ÊâßË°åÂá∫Èîô:', error)
    }
  }
  
  // ‰ΩøÁî®Èò≤ÊäñÂáΩÊï∞ÂåÖË£ÖresizeÂ§ÑÁêÜÂáΩÊï∞
  resizeHandler = debounceResize(originalResizeHandler, 150)
  
  // Ê∑ªÂä†Á™óÂè£Â§ßÂ∞èÊîπÂèòÁõëÂê¨Âô®
  window.addEventListener('resize', resizeHandler)
  
  // Âä†ËΩΩË°åÂä®ËÆ°Âàí
  loadActionPlan()
})

// ÁªÑ‰ª∂ÈîÄÊØÅÊó∂Ê∏ÖÁêÜ
onUnmounted(() => {
  try {
    // ÁßªÈô§resize‰∫ã‰ª∂ÁõëÂê¨Âô®
    if (resizeHandler) {
      window.removeEventListener('resize', resizeHandler)
      resizeHandler = null
    }
    
    // Ê∏ÖÁêÜÈò≤Êäñtimeout
    if (resizeTimeout) {
      clearTimeout(resizeTimeout)
      resizeTimeout = null
    }
    
    // Ê∏ÖÁêÜEChartsÂÆû‰æã
    if (trendChartRef.value) {
      const chart = echarts.getInstanceByDom(trendChartRef.value)
      if (chart) {
        chart.dispose()
      }
    }
    
    if (sentimentChartRef.value) {
      const chart = echarts.getInstanceByDom(sentimentChartRef.value)
      if (chart) {
        chart.dispose()
      }
    }
    
    if (categoryChartRef.value) {
      const chart = echarts.getInstanceByDom(categoryChartRef.value)
      if (chart) {
        chart.dispose()
      }
    }
    
    // Ê∏ÖÁêÜËØç‰∫ëÂõæcanvas‰∫ã‰ª∂ÁõëÂê¨Âô®
    if (wordCloudRef.value) {
      const canvas = wordCloudRef.value
      const newCanvas = canvas.cloneNode(true)
      canvas.parentNode?.replaceChild(newCanvas, canvas)
    }
    
    // Ê∏ÖÁêÜËØç‰∫ëÂõæÊèêÁ§∫Ê°Ü
    const tooltip = document.getElementById('wordcloud-tooltip')
    if (tooltip && tooltip.parentNode) {
      tooltip.parentNode.removeChild(tooltip)
    }
  } catch (error) {
    console.warn('ÁªÑ‰ª∂Ê∏ÖÁêÜËøáÁ®ã‰∏≠Âá∫Áé∞ÈîôËØØ:', error)
  }
})
</script>

<style lang="scss" scoped>
.dashboard-container {
  min-height: calc(100vh - var(--header-height) - var(--footer-height));
  overflow-y: auto;
}

// Ë°åÂä®ËÆ°ÂàíÂå∫ÂüüÊ†∑Âºè
.action-plan-section {
  margin-bottom: 24px;
  
  .action-plan-card {
    border-radius: var(--border-radius-lg);
    
    :deep(.ant-card-body) {
      padding: 24px;
    }
  }
}

.loading-placeholder {
  text-align: center;
  padding: 40px;
}

.action-plan-content {
  padding: 16px 0;
}

.plan-overview {
  margin-bottom: 24px;
}

.metric-item {
  text-align: center;
  padding: 16px;
  border-radius: 12px;
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  // ÊöóÈªëÊ®°ÂºèÂÖºÂÆπ
  @media (prefers-color-scheme: dark) {
    &:hover {
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }
  }
}

.priority-p0 {
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
  color: #d32f2f;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
    color: #ffcdd2;
  }
}

.priority-p1 {
  background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
  color: #f57c00;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
    color: #ffe0b2;
  }
}

.priority-p2 {
  background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
  color: #1976d2;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(135deg, #1976d2 0%, #2196f3 100%);
    color: #bbdefb;
  }
}

.priority-p3 {
  background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
  color: #388e3c;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(135deg, #388e3c 0%, #4caf50 100%);
    color: #c8e6c9;
  }
}

.metric-value {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 4px;
}

.metric-label {
  font-size: 14px;
  font-weight: 500;
  opacity: 0.8;
}

.plan-info {
  margin-bottom: 24px;
}

.info-card {
  background: var(--background-color-light);
  border-radius: 8px;
  padding: 16px;
  border-left: 4px solid #1890ff;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: rgba(255, 255, 255, 0.04);
    border-left-color: #40a9ff;
  }
}

.timeline-info {
  border-left-color: #52c41a;
  
  @media (prefers-color-scheme: dark) {
    border-left-color: #73d13d;
  }
}

.effort-info {
  border-left-color: #fa8c16;
  
  @media (prefers-color-scheme: dark) {
    border-left-color: #ffa940;
  }
}

.info-header {
  font-weight: 600;
  color: var(--heading-color);
  margin-bottom: 8px;
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.85);
  }
}

.info-content {
  font-size: 16px;
  color: var(--text-color);
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.65);
  }
}

.section-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--heading-color);
  margin: 24px 0 16px 0;
  display: flex;
  align-items: center;
  gap: 8px;
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.85);
  }
}

.insights-section {
  margin-bottom: 24px;
}

.insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 12px;
}

.insight-item {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 16px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
  
  // ÊöóÈªëÊ®°Âºè‰ºòÂåñ
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
}

.insight-content {
  font-size: 14px;
  line-height: 1.5;
}

.actions-section {
  margin-top: 24px;
}

.actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 16px;
}

.action-card {
  background: var(--background-color);
  border: 1px solid var(--border-color-split);
  border-radius: 12px;
  padding: 20px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  
  // ÊöóÈªëÊ®°Âºè
  @media (prefers-color-scheme: dark) {
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.1);
  }
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #1890ff, #52c41a);
  }
  
  &.priority-p0::before {
    background: linear-gradient(90deg, #ff4d4f, #ff7875);
  }
  
  &.priority-p1::before {
    background: linear-gradient(90deg, #fa8c16, #ffa940);
  }
  
  &.priority-p2::before {
    background: linear-gradient(90deg, #1890ff, #40a9ff);
  }
  
  &.priority-p3::before {
    background: linear-gradient(90deg, #52c41a, #73d13d);
  }
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    border-color: #1890ff;
    
    @media (prefers-color-scheme: dark) {
      box-shadow: 0 8px 24px rgba(255, 255, 255, 0.1);
      border-color: #40a9ff;
    }
  }
}

.action-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.action-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--heading-color);
  flex: 1;
  margin-right: 12px;
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.85);
  }
}

.action-description {
  color: var(--text-color);
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 16px;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.65);
  }
}

.action-footer {
  border-top: 1px solid var(--border-color-split);
  padding-top: 12px;
  
  @media (prefers-color-scheme: dark) {
    border-top-color: rgba(255, 255, 255, 0.1);
  }
}

.action-team, .action-effort {
  font-size: 12px;
  color: var(--text-color-secondary);
  background: var(--background-color-light);
  padding: 4px 8px;
  border-radius: 4px;
  
  @media (prefers-color-scheme: dark) {
    color: rgba(255, 255, 255, 0.45);
    background: rgba(255, 255, 255, 0.04);
  }
}

.empty-placeholder {
  text-align: center;
  padding: 60px 20px;
}

// ÁÉ≠ËØçÂàÜÊûêÂå∫ÂüüÊ†∑Âºè
.hotwords-section {
  margin-bottom: 24px;
  
  .hotwords-card {
    :deep(.ant-card-body) {
      padding: 24px;
    }
  }
}

// ÁÉ≠ËØçÈù¢ÊùøÊ†∑Âºè
.hotwords-panel {
  height: 500px;
  border: 1px solid var(--border-color-split);
  border-radius: var(--border-radius-base);
  overflow: hidden;
  
  .panel-header {
    background: var(--background-color-light);
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color-split);
    
    .panel-title {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      
      .title-icon {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 8px;
        font-size: 12px;
        
        &.positive {
          background: var(--success-color-bg);
          color: var(--success-color);
        }
        
        &.negative {
          background: var(--error-color-bg);
          color: var(--error-color);
        }
      }
    }
  }
  
  .hotwords-list {
    height: calc(100% - 56px);
    overflow-y: auto;
    padding: 0 20px;
    
    &::-webkit-scrollbar {
      width: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: var(--background-color-light);
      border-radius: 3px;
    }
    
    &::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 3px;
      
      &:hover {
        background: var(--border-color-base);
      }
    }
  }
  
  .hotword-item {
    display: flex;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color-split);
    transition: all var(--animation-duration-base);
    
    &:last-child {
      border-bottom: none;
    }
    
    &:hover {
      background: var(--background-color-light);
      margin: 0 -20px;
      padding-left: 20px;
      padding-right: 20px;
    }
    
    &.top-word {
      .word-rank {
        background: linear-gradient(135deg, var(--warning-color), #ffb347);
        color: white;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(250, 173, 20, 0.3);
      }
      
      .word-text {
        font-weight: 600;
        color: var(--heading-color);
      }
    }
  }
  
  .word-rank {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--background-color-light);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .word-content {
    flex: 1;
    min-width: 0;
  }
  
  .word-text {
    font-size: 14px;
    margin-bottom: 4px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .word-bar {
    height: 4px;
    background: var(--background-color-light);
    border-radius: 2px;
    overflow: hidden;
    position: relative;
  }
  
  .word-progress {
    height: 100%;
    border-radius: 2px;
    transition: width 0.3s ease;
    
    &.positive {
      background: linear-gradient(90deg, var(--success-color), #87d068);
    }
    
    &.negative {
      background: linear-gradient(90deg, var(--error-color), #ff7875);
    }
  }
  
  .word-count {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color-secondary);
    margin-left: 12px;
    flex-shrink: 0;
  }
}

// ËØç‰∫ëÂõæÂÆπÂô®Ê†∑Âºè
.wordcloud-container {
  height: 500px;
  border: 1px solid var(--border-color-split);
  border-radius: var(--border-radius-base);
  overflow: hidden;
  
  .wordcloud-header {
    background: var(--background-color-light);
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color-split);
    
    .wordcloud-title {
      margin: 0 0 12px 0;
      font-size: 16px;
      font-weight: 600;
    }
    
    .wordcloud-stats {
      display: flex;
      gap: 20px;
      
      .stat-item {
        display: flex;
        align-items: center;
        font-size: 12px;
        
        .stat-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          margin-right: 6px;
          
          &.positive {
            background: var(--success-color);
          }
          
          &.negative {
            background: var(--error-color);
          }
          
          &.neutral {
            background: var(--info-color);
          }
        }
      }
    }
  }
  
  .wordcloud-chart {
    height: calc(100% - 76px - 80px); // ÂáèÂéª‰∏ä‰∏ãËæπË∑ù
    width: calc(100% - 80px); // ÂáèÂéªÂ∑¶Âè≥ËæπË∑ù
    margin: 40px auto;
    display: block;
    cursor: pointer;
    border-radius: 8px;
    background: transparent;
  }
}



.stats-section {
  margin: 24px 0 24px 0;
  
  .stat-card {
    background: var(--background-color);
    border-radius: var(--border-radius-lg);
    padding: 24px;
    box-shadow: var(--box-shadow-card);
    transition: all var(--animation-duration-base);
    border-left: 4px solid var(--border-color);
    border: 1px solid var(--border-color-split);
    
    &:hover {
      box-shadow: var(--box-shadow-base);
      transform: translateY(-2px);
    }
    
    &.stat-primary {
      border-left-color: var(--primary-color);
      
      .stat-icon {
        background: var(--info-color-bg);
        color: var(--primary-color);
      }
    }
    
    &.stat-success {
      border-left-color: var(--success-color);
      
      .stat-icon {
        background: var(--success-color-bg);
        color: var(--success-color);
      }
    }
    
    &.stat-warning {
      border-left-color: var(--warning-color);
      
      .stat-icon {
        background: var(--warning-color-bg);
        color: var(--warning-color);
      }
    }
    
    &.stat-danger {
      border-left-color: var(--error-color);
      
      .stat-icon {
        background: var(--error-color-bg);
        color: var(--error-color);
      }
    }
  }
  
  .stat-content {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
  }
  
  .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    margin-right: 16px;
  }
  
  .stat-info {
    flex: 1;
  }
  
  .stat-number {
    font-size: 32px;
    font-weight: 600;
    line-height: 1;
    margin-bottom: 4px;
  }
  
  .stat-label {
    font-size: 14px;
    color: var(--text-color-secondary);
  }
  
  .stat-trend {
    display: flex;
    align-items: center;
    font-size: 12px;
    
    &.positive {
      color: var(--success-color);
    }
    
    &.negative {
      color: var(--error-color);
    }
    
    .trend-icon {
      margin-right: 4px;
    }
    
    .trend-value {
      font-weight: 600;
      margin-right: 4px;
    }
  }
}

.charts-section {
  margin-bottom: 24px;
  
  .chart-card {
    height: 100%;
    
    :deep(.ant-card-body) {
      padding: 24px 24px 16px;
    }
  }
  
  .chart-container {
    height: 300px;
    
    &.large {
      height: 400px;
    }
  }
  
  .view-more {
    color: var(--primary-color);
    text-decoration: none;
    
    &:hover {
      text-decoration: underline;
    }
  }
}

.hot-issues-list {
  .issue-item {
    display: flex;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color-split);
    
    &:last-child {
      border-bottom: none;
    }
    
    &.top-issue .issue-rank {
      background: linear-gradient(135deg, var(--warning-color), #ffb347);
      color: white;
      font-weight: bold;
    }
  }
  
  .issue-rank {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--background-color-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .issue-content {
    flex: 1;
    min-width: 0;
  }
  
  .issue-title {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 4px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .issue-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-color-secondary);
  }
  
  .issue-trend {
    margin-left: 8px;
    
    .trend-indicator {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      
      &.rising {
        background: var(--success-color-bg);
        color: var(--success-color);
      }
      
      &.falling {
        background: var(--error-color-bg);
        color: var(--error-color);
      }
    }
  }
}

// Ë°åÂä®ËÆ°ÂàíÂå∫ÂüüÁöÑCSSÊ†∑ÂºèÂ∑≤ÁªèÂú®ÂâçÈù¢ÂÆö‰πâ‰∫Ü
  
.activity-section {
  .activity-card {
    height: 100%;
    
    :deep(.ant-card-body) {
      padding: 16px 24px;
    }
  }
  
  .feedback-title {
    font-weight: 500;
  }
  
  .feedback-content {
          margin-bottom: 8px;
    color: var(--text-color-secondary);
    line-height: 1.4;
  }
  
  .feedback-meta {
    display: flex;
    gap: 16px;
  }
  
  .meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: var(--text-color-disabled);
  }
  
  .notification-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    
    &.type-warning {
      background: var(--warning-color-bg);
      color: var(--warning-color);
    }
    
    &.type-info {
      background: var(--info-color-bg);
      color: var(--info-color);
    }
    
    &.type-success {
      background: var(--success-color-bg);
      color: var(--success-color);
    }
    
    &.type-error {
      background: var(--error-color-bg);
      color: var(--error-color);
    }
  }
  
  .notification-title {
    font-weight: 500;
  }
  
  .notification-content {
    margin-bottom: 4px;
    color: var(--text-color-secondary);
        }
        
  .notification-time {
    font-size: 12px;
    color: var(--text-color-disabled);
  }
  
  :deep(.ant-list-item.unread) {
    background: var(--info-color-bg);
    border-radius: 6px;
    margin-bottom: 4px;
    border: 1px solid var(--info-color-outline);
  }
      }

// ÂìçÂ∫îÂºèËÆæËÆ°
@media (max-width: 768px) {
  
  .stat-card {
    text-align: center;
    
    .stat-content {
      flex-direction: column;
      text-align: center;
    }
    
    .stat-icon {
      margin-right: 0;
      margin-bottom: 12px;
    }
  }
  
  .chart-container {
    height: 250px !important;
    
    &.large {
      height: 300px !important;
    }
  }
  
  // Ë°åÂä®ËÆ°ÂàíÂìçÂ∫îÂºèÊ†∑Âºè
  .action-plan-section {
    .action-plan-content {
      padding: 8px 0;
    }
    
    .plan-overview {
      margin-bottom: 16px;
    }
    
    .metric-item {
      padding: 12px;
      
      .metric-value {
        font-size: 24px;
      }
      
      .metric-label {
        font-size: 12px;
      }
    }
    
    .plan-info {
      margin-bottom: 16px;
    }
    
    .info-card {
      padding: 12px;
      
      .info-header {
        font-size: 14px;
        margin-bottom: 6px;
      }
      
      .info-content {
        font-size: 14px;
      }
    }
    
    .section-title {
      font-size: 16px;
      margin: 16px 0 12px 0;
    }
    
    .insights-grid {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    
    .insight-item {
      padding: 12px;
      
      .insight-content {
        font-size: 13px;
      }
    }
    
    .actions-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .action-card {
      padding: 16px;
      
      .action-title {
        font-size: 15px;
      }
      
      .action-description {
        font-size: 13px;
        -webkit-line-clamp: 2;
      }
      
      .action-team, .action-effort {
        font-size: 11px;
        padding: 3px 6px;
      }
    }
  }
  
  // ÁÉ≠ËØçÂàÜÊûêÂìçÂ∫îÂºèÊ†∑Âºè
  .hotwords-section {
    .hotwords-panel {
      height: 350px;
      
      .hotwords-list {
        padding: 0 12px;
      }
      
      .hotword-item {
        &:hover {
          margin: 0 -12px;
          padding-left: 12px;
          padding-right: 12px;
        }
      }
      
      .panel-header {
        padding: 12px 16px;
        
        .panel-title {
          font-size: 14px;
        }
      }
    }
    
    .wordcloud-container {
      height: 350px;
      margin-top: 16px;
      
      .wordcloud-header {
        padding: 12px 16px;
        
        .wordcloud-title {
          font-size: 14px;
          margin-bottom: 8px;
        }
        
        .wordcloud-stats {
          gap: 12px;
          
          .stat-item {
            font-size: 11px;
          }
        }
      }
      
      .wordcloud-chart {
        height: calc(100% - 76px - 40px); // ÁßªÂä®Á´ØÂáèÂ∞ëËæπË∑ù
        width: calc(100% - 40px); // ÁßªÂä®Á´ØÂáèÂ∞ëËæπË∑ù
        margin: 20px auto; // ÁßªÂä®Á´ØÂáèÂ∞ëËæπË∑ù
      }
    }
  }
}

// ÊµÆÂä®Âä®Áîª
@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  33% {
    transform: translateY(-10px) rotate(1deg);
  }
  66% {
    transform: translateY(5px) rotate(-1deg);
  }
}
</style> 