"use strict";(self["webpackChunkfeedback_analysis_enterprise"]=self["webpackChunkfeedback_analysis_enterprise"]||[]).push([[56],{4056:function(a,e,t){t.r(e),t.d(e,{default:function(){return q}});var i=t(6768),l=t(4232);const s={class:"decision-engine"},n={key:0,class:"dimension-weights"},o={class:"weight-label"},r={class:"weight-value"},c={ref:"dimensionsChart",style:{height:"400px"}},d={ref:"priorityChart",style:{height:"300px"}},u={key:0,class:"loading-placeholder"},_={key:1,class:"action-plan-content"},v={class:"metric-item priority-p0"},p={class:"metric-value"},g={class:"metric-item priority-p1"},k={class:"metric-value"},f={class:"metric-item priority-p2"},y={class:"metric-value"},m={class:"metric-item priority-p3"},b={class:"metric-value"},h={class:"info-card timeline-info"},F={class:"info-content"},C={class:"info-card effort-info"},w={class:"info-content"},L={key:0,class:"insights-section"},P={class:"insights-grid"},x={class:"insight-content"},W={key:1,class:"actions-section"},A={class:"actions-grid"},X={class:"action-header"},$={class:"action-title"},E={class:"action-description"},D={class:"action-footer"},R={class:"action-team"},I={class:"action-effort"},O={key:2,class:"empty-placeholder"};function K(a,e,t,K,S,z){const Q=(0,i.g2)("CalculatorOutlined"),V=(0,i.g2)("a-button"),B=(0,i.g2)("ReloadOutlined"),T=(0,i.g2)("a-space"),U=(0,i.g2)("a-page-header"),j=(0,i.g2)("a-statistic"),H=(0,i.g2)("a-card"),Y=(0,i.g2)("a-col"),q=(0,i.g2)("a-row"),G=(0,i.g2)("a-slider"),J=(0,i.g2)("a-list-item"),M=(0,i.g2)("a-list"),N=(0,i.g2)("a-tag"),Z=(0,i.g2)("a-spin"),aa=(0,i.g2)("a-empty");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(U,{title:"æ™ºèƒ½å†³ç­–å¼•æ“Ž","sub-title":"æ´žå¯Ÿé‡åŒ–ã€ä¼˜å…ˆçº§æŽ’åºã€è¡ŒåŠ¨è§„åˆ’ç”Ÿæˆ"},{extra:(0,i.k6)(()=>[(0,i.bF)(T,null,{default:(0,i.k6)(()=>[(0,i.bF)(V,{type:"primary",loading:K.loading,onClick:K.runPriorityAnalysis},{default:(0,i.k6)(()=>[(0,i.bF)(Q),e[0]||(e[0]=(0,i.eW)(" æ‰§è¡Œä¼˜å…ˆçº§åˆ†æž "))]),_:1,__:[0]},8,["loading","onClick"]),(0,i.bF)(V,{onClick:K.refreshData},{default:(0,i.k6)(()=>[(0,i.bF)(B),e[1]||(e[1]=(0,i.eW)(" åˆ·æ–°æ•°æ® "))]),_:1,__:[1]},8,["onClick"])]),_:1})]),_:1}),(0,i.bF)(q,{gutter:16,class:"status-row"},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:8},{default:(0,i.k6)(()=>[(0,i.bF)(H,{class:"status-card"},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"é«˜çº§ä¼˜å…ˆçº§å¼•æ“Ž",value:K.engineStatus.advanced_priority_engine?"æ­£å¸¸":"å¼‚å¸¸","value-style":{color:K.engineStatus.advanced_priority_engine?"#3f8600":"#cf1322"}},null,8,["value","value-style"])]),_:1})]),_:1}),(0,i.bF)(Y,{span:8},{default:(0,i.k6)(()=>[(0,i.bF)(H,{class:"status-card"},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"åŸºç¡€ä¼˜å…ˆçº§å¼•æ“Ž",value:K.engineStatus.priority_engine?"æ­£å¸¸":"å¼‚å¸¸","value-style":{color:K.engineStatus.priority_engine?"#3f8600":"#cf1322"}},null,8,["value","value-style"])]),_:1})]),_:1}),(0,i.bF)(Y,{span:8},{default:(0,i.k6)(()=>[(0,i.bF)(H,{class:"status-card"},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"è¡ŒåŠ¨ç”Ÿæˆå™¨",value:K.engineStatus.action_generator?"æ­£å¸¸":"å¼‚å¸¸","value-style":{color:K.engineStatus.action_generator?"#3f8600":"#cf1322"}},null,8,["value","value-style"])]),_:1})]),_:1})]),_:1}),(0,i.bF)(H,{title:"å†³ç­–åˆ†æžæ¦‚è§ˆ",class:"overview-card"},{default:(0,i.k6)(()=>[K.analyticsData?((0,i.uX)(),(0,i.Wv)(q,{key:0,gutter:16},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"æ€»åé¦ˆæ•°",value:K.analyticsData.total_feedbacks},null,8,["value"])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"å·²åˆ†æžæ•°",value:K.analyticsData.analyzed_count,"value-style":{color:"#3f8600"}},null,8,["value"])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"å¹³å‡ä¼˜å…ˆçº§å¾—åˆ†",value:K.analyticsData.avg_scores.priority,suffix:"åˆ†",precision:1},null,8,["value"])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"å¹³å‡ROI",value:(100*K.analyticsData.avg_scores.roi).toFixed(2),suffix:"%","value-style":{color:"#cf1322"}},null,8,["value"])]),_:1})]),_:1})):(0,i.Q3)("",!0)]),_:1}),(0,i.bF)(q,{gutter:16,class:"content-row"},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.bF)(H,{title:"6ç»´åº¦æƒé‡é…ç½®",class:"weights-card"},{default:(0,i.k6)(()=>[K.weightsConfig?((0,i.uX)(),(0,i.CE)("div",n,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(K.weightsConfig.description,(a,e)=>((0,i.uX)(),(0,i.CE)("div",{class:"weight-item",key:e},[(0,i.Lk)("div",o,[(0,i.Lk)("span",null,(0,l.v_)(a.split(" - ")[0])+":",1)]),(0,i.bF)(G,{modelValue:K.weightsConfig.dimension_weights[e],"onUpdate:modelValue":a=>K.weightsConfig.dimension_weights[e]=a,max:1,step:.05,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Lk)("span",r,(0,l.v_)(K.weightsConfig.dimension_weights[e]),1)]))),128))])):(0,i.Q3)("",!0),(0,i.bF)(T,null,{default:(0,i.k6)(()=>[(0,i.bF)(V,{type:"primary",onClick:K.saveWeights},{default:(0,i.k6)(()=>e[2]||(e[2]=[(0,i.eW)(" ä¿å­˜æƒé‡é…ç½® ")])),_:1,__:[2]},8,["onClick"]),(0,i.bF)(V,{onClick:K.resetWeights},{default:(0,i.k6)(()=>e[3]||(e[3]=[(0,i.eW)(" é‡ç½®é»˜è®¤å€¼ ")])),_:1,__:[3]},8,["onClick"])]),_:1})]),_:1})]),_:1}),(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.bF)(H,{title:"6ç»´åº¦é›·è¾¾å›¾",class:"radar-card"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",c,null,512)]),_:1})]),_:1})]),_:1}),(0,i.bF)(q,{gutter:16,class:"content-row"},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.bF)(H,{title:"ä¼˜å…ˆçº§åˆ†å¸ƒ",class:"priority-card"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",d,null,512)]),_:1})]),_:1}),(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.bF)(H,{title:"æˆ˜ç•¥å»ºè®®",class:"recommendations-card"},{default:(0,i.k6)(()=>[(0,i.bF)(M,{"data-source":K.analyticsData?.recommendations_summary||[],size:"small"},{renderItem:(0,i.k6)(({item:a})=>[(0,i.bF)(J,null,{default:(0,i.k6)(()=>[(0,i.eW)((0,l.v_)(a),1)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1}),(0,i.bF)(H,{title:"ðŸš€ æ™ºèƒ½è¡ŒåŠ¨è®¡åˆ’",class:"action-plan-card"},{extra:(0,i.k6)(()=>[(0,i.bF)(T,null,{default:(0,i.k6)(()=>[K.actionPlan?((0,i.uX)(),(0,i.Wv)(N,{key:0,color:"blue"},{default:(0,i.k6)(()=>[(0,i.eW)("è®¡åˆ’ID: "+(0,l.v_)(K.actionPlan.plan_id),1)]),_:1})):(0,i.Q3)("",!0),K.actionPlan?((0,i.uX)(),(0,i.Wv)(N,{key:1,color:"green"},{default:(0,i.k6)(()=>[(0,i.eW)((0,l.v_)(K.actionPlan.total_actions)+" ä¸ªè¡ŒåŠ¨é¡¹",1)]),_:1})):(0,i.Q3)("",!0)]),_:1})]),default:(0,i.k6)(()=>[K.loading?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(Z,{size:"large"},{tip:(0,i.k6)(()=>e[4]||(e[4]=[(0,i.eW)("æ­£åœ¨ç”Ÿæˆæ™ºèƒ½è¡ŒåŠ¨è®¡åˆ’...")])),_:1})])):K.actionPlan?((0,i.uX)(),(0,i.CE)("div",_,[(0,i.bF)(q,{gutter:16,class:"plan-overview"},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.Lk)("div",v,[(0,i.Lk)("div",p,(0,l.v_)(K.actionPlan.p0_actions),1),e[5]||(e[5]=(0,i.Lk)("div",{class:"metric-label"},"P0 ç´§æ€¥",-1))])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.Lk)("div",g,[(0,i.Lk)("div",k,(0,l.v_)(K.actionPlan.p1_actions),1),e[6]||(e[6]=(0,i.Lk)("div",{class:"metric-label"},"P1 é‡è¦",-1))])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.Lk)("div",f,[(0,i.Lk)("div",y,(0,l.v_)(K.actionPlan.p2_actions),1),e[7]||(e[7]=(0,i.Lk)("div",{class:"metric-label"},"P2 æ­£å¸¸",-1))])]),_:1}),(0,i.bF)(Y,{span:6},{default:(0,i.k6)(()=>[(0,i.Lk)("div",m,[(0,i.Lk)("div",b,(0,l.v_)(K.actionPlan.p3_actions),1),e[8]||(e[8]=(0,i.Lk)("div",{class:"metric-label"},"P3 æ¬¡è¦",-1))])]),_:1})]),_:1}),(0,i.bF)(q,{gutter:16,class:"plan-info"},{default:(0,i.k6)(()=>[(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.Lk)("div",h,[e[9]||(e[9]=(0,i.Lk)("div",{class:"info-header"},"â° é¢„ä¼°æ—¶é—´çº¿",-1)),(0,i.Lk)("div",F,(0,l.v_)(K.actionPlan.estimated_timeline),1)])]),_:1}),(0,i.bF)(Y,{span:12},{default:(0,i.k6)(()=>[(0,i.Lk)("div",C,[e[10]||(e[10]=(0,i.Lk)("div",{class:"info-header"},"ðŸ‘¥ å·¥ä½œé‡ä¼°ç®—",-1)),(0,i.Lk)("div",w,(0,l.v_)(K.actionPlan.total_effort_estimate),1)])]),_:1})]),_:1}),K.actionPlan.key_insights&&K.actionPlan.key_insights.length>0?((0,i.uX)(),(0,i.CE)("div",L,[e[11]||(e[11]=(0,i.Lk)("div",{class:"section-title"},"ðŸ’¡ å…³é”®æ´žå¯Ÿ",-1)),(0,i.Lk)("div",P,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(K.actionPlan.key_insights,(a,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"insight-item"},[(0,i.Lk)("div",x,(0,l.v_)(a),1)]))),128))])])):(0,i.Q3)("",!0),K.actionPlan.action_items&&K.actionPlan.action_items.length>0?((0,i.uX)(),(0,i.CE)("div",W,[e[12]||(e[12]=(0,i.Lk)("div",{class:"section-title"},"ðŸŽ¯ æ ¸å¿ƒè¡ŒåŠ¨é¡¹",-1)),(0,i.Lk)("div",A,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(K.actionPlan.action_items.slice(0,6),a=>((0,i.uX)(),(0,i.CE)("div",{key:a.id,class:(0,l.C4)(["action-card",`priority-${a.priority.toLowerCase()}`])},[(0,i.Lk)("div",X,[(0,i.Lk)("div",$,(0,l.v_)(a.title),1),(0,i.bF)(N,{color:K.getPriorityColor(a.priority),size:"small"},{default:(0,i.k6)(()=>[(0,i.eW)((0,l.v_)(a.priority),1)]),_:2},1032,["color"])]),(0,i.Lk)("div",E,(0,l.v_)(a.description),1),(0,i.Lk)("div",D,[(0,i.bF)(T,null,{default:(0,i.k6)(()=>[(0,i.Lk)("span",R,"ðŸ‘¥ "+(0,l.v_)(a.owner_team),1),(0,i.Lk)("span",I,"â³ "+(0,l.v_)(a.estimated_effort),1)]),_:2},1024)])],2))),128))])])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("div",O,[(0,i.bF)(aa,{description:"æš‚æ— è¡ŒåŠ¨è®¡åˆ’æ•°æ®"},{default:(0,i.k6)(()=>[(0,i.bF)(V,{type:"primary",onClick:K.refreshData},{default:(0,i.k6)(()=>e[13]||(e[13]=[(0,i.eW)("é‡æ–°ç”Ÿæˆ")])),_:1,__:[13]},8,["onClick"])]),_:1})]))]),_:1})])}var S=t(144),z=t(7694),Q=t(9804),V=t(9612),B=t(723),T=t(1921),U=t(4288),j={name:"DecisionEngine",components:{CalculatorOutlined:V.A,ReloadOutlined:B.A},setup(){const a=(0,S.KR)(!1),e=(0,S.KR)(null),t=(0,S.KR)(null),l=(0,S.KR)({advanced_priority_engine:!1,priority_engine:!1,action_generator:!1}),s=(0,S.KR)(null),n=(0,S.KR)(null),o=(0,S.KR)(null),r=async()=>{a.value=!0;try{const[a,e,t]=await Promise.all([U.f0.getHealth(),U.f0.getWeightsConfig(),U.f0.getAnalyticsOverview()]);l.value=a.data,s.value=e.data,n.value=t.data,await c(),(0,i.dY)(()=>{d()})}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥:",e),z.Ay.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{a.value=!1}},c=async()=>{try{const a=await U.WB.getFeedbacks({limit:30}),e=a.data.data||[],t=e.map(a=>a.id||a._id).filter(Boolean);if(0===t.length)return void console.warn("æ²¡æœ‰æ‰¾åˆ°å¯åˆ†æžçš„åé¦ˆæ•°æ®");const i=await U.f0.generateActionPlan({feedback_ids:t,priority_threshold:.4,include_low_priority:!0});o.value=i.data}catch(a){console.error("è¡ŒåŠ¨è®¡åˆ’ç”Ÿæˆå¤±è´¥:",a)}},d=()=>{if(t.value&&n.value){const a=T.Ts(t.value),e=Object.entries(n.value.priority_distribution).map(([a,e])=>({name:a,value:e}));a.setOption({tooltip:{trigger:"item"},series:[{type:"pie",radius:"60%",data:e}]})}if(e.value&&n.value){const a=T.Ts(e.value),t=n.value.six_dimensions_avg;a.setOption({tooltip:{trigger:"axis"},radar:{indicator:[{name:"å½±å“åŠ›",max:100},{name:"ç´§æ€¥æ€§",max:100},{name:"å®žçŽ°æˆæœ¬",max:100},{name:"å•†ä¸šä»·å€¼",max:100},{name:"æˆ˜ç•¥åŒ¹é…",max:100},{name:"ç”¨æˆ·å£°éŸ³",max:100}]},series:[{type:"radar",data:[{value:[t.impact,t.urgency,t.effort,t.business_value,t.strategic,t.user_voice],name:"6ç»´åº¦è¯„åˆ†"}]}]})}},u=()=>{r(),z.Ay.success("æ•°æ®å·²åˆ·æ–°")},_=async()=>{a.value=!0;try{z.Ay.loading("æ­£åœ¨èŽ·å–åé¦ˆæ•°æ®...",1);const a=await U.WB.getFeedbacks({limit:50});console.log("åé¦ˆAPIå“åº”:",a.data);const e=a.data.data||[],t=e.map(a=>a.id||a._id).filter(Boolean);if(console.log("æå–åˆ°çš„åé¦ˆID:",t),0===t.length)return void z.Ay.warning("æ²¡æœ‰æ‰¾åˆ°å¯åˆ†æžçš„åé¦ˆæ•°æ®");z.Ay.loading(`æ­£åœ¨åˆ†æž ${t.length} æ¡åé¦ˆæ•°æ®...`,2);const l=await U.f0.calculatePriority({feedback_ids:t,use_advanced_engine:!0});z.Ay.success(`ä¼˜å…ˆçº§åˆ†æžå®Œæˆï¼åˆ†æžäº† ${l.data.total_analyzed} æ¡åé¦ˆ`),Q.A.info({title:"ðŸŽ¯ ä¼˜å…ˆçº§åˆ†æžç»“æžœ",width:600,content:(0,i.h)("div",[(0,i.h)("div",{class:"analysis-summary"},[(0,i.h)("p",`ðŸ“Š æ€»è®¡åˆ†æž: ${l.data.total_analyzed} æ¡åé¦ˆ`),(0,i.h)("p",`ðŸ”¥ é«˜ä¼˜å…ˆçº§: ${l.data.high_priority_count} æ¡`),(0,i.h)("p",`âš¡ ä¸­ç­‰ä¼˜å…ˆçº§: ${l.data.medium_priority_count} æ¡`),(0,i.h)("p",`ðŸ“ ä½Žä¼˜å…ˆçº§: ${l.data.low_priority_count} æ¡`),(0,i.h)("p",`ðŸ’° å¹³å‡ROI: ${(100*l.data.avg_roi).toFixed(1)}%`),(0,i.h)("p",`â­ å¹³å‡å¾—åˆ†: ${l.data.avg_priority_score}/100`)]),(0,i.h)("div",{class:"top-priorities",style:{marginTop:"16px"}},[(0,i.h)("h4","ðŸ† Top 3 ä¼˜å…ˆçº§é¡¹ç›®:"),...l.data.top_priority_items.slice(0,3).map((a,e)=>(0,i.h)("div",{key:a.feedback_id,style:{padding:"8px",margin:"4px 0",background:"#f6f8ff",borderRadius:"4px",border:"1px solid #d9d9d9"}},[(0,i.h)("strong",`${e+1}. ${a.priority_tier} - å¾—åˆ†: ${a.priority_score.toFixed(1)}`),(0,i.h)("br"),(0,i.h)("span",{style:{fontSize:"12px",color:"#666"}},`å½±å“åŠ›: ${a.impact_score.toFixed(1)} | ç´§æ€¥æ€§: ${a.urgency_score.toFixed(1)} | ROI: ${(100*a.expected_roi).toFixed(1)}%`)]))])])}),await r()}catch(e){console.error("ä¼˜å…ˆçº§åˆ†æžå¤±è´¥:",e),z.Ay.error(`ä¼˜å…ˆçº§åˆ†æžå¤±è´¥: ${e.response?.data?.detail||e.message}`)}finally{a.value=!1}},v=a=>{const e={P0:"red",P1:"orange",P2:"blue",P3:"green"};return e[a]||"default"},p=()=>{z.Ay.success("æƒé‡é…ç½®å·²ä¿å­˜")},g=()=>{r(),z.Ay.success("æƒé‡é…ç½®å·²é‡ç½®")};return(0,i.sV)(()=>{r()}),{loading:a,dimensionsChart:e,priorityChart:t,engineStatus:l,weightsConfig:s,analyticsData:n,actionPlan:o,refreshData:u,runPriorityAnalysis:_,getPriorityColor:v,saveWeights:p,resetWeights:g}}},H=t(1241);const Y=(0,H.A)(j,[["render",K],["__scopeId","data-v-802f80bc"]]);var q=Y}}]);
//# sourceMappingURL=56.c294643b.js.map