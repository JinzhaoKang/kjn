"use strict";(self["webpackChunkfeedback_analysis_enterprise"]=self["webpackChunkfeedback_analysis_enterprise"]||[]).push([[760],{8760:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var l=t(6768),s=t(4232);const i={class:"settings"},n={key:0,style:{color:"red","font-size":"12px","margin-top":"4px"}},o={key:1,style:{color:"#666","font-size":"12px","margin-top":"4px"}},d={class:"weight-config"},u={class:"weight-item"},r={class:"weight-item"},c={class:"weight-item"};function b(e,a,t,b,m,p){const k=(0,l.g2)("a-page-header"),g=(0,l.g2)("a-input"),y=(0,l.g2)("a-form-item"),_=(0,l.g2)("a-textarea"),f=(0,l.g2)("a-select-option"),v=(0,l.g2)("a-select"),F=(0,l.g2)("a-input-number"),h=(0,l.g2)("a-button"),S=(0,l.g2)("a-form"),w=(0,l.g2)("a-card"),U=(0,l.g2)("a-tag"),C=(0,l.g2)("a-tab-pane"),x=(0,l.g2)("a-switch"),L=(0,l.g2)("a-slider"),A=(0,l.g2)("a-input-password"),W=(0,l.g2)("UserAddOutlined"),K=(0,l.g2)("a-space"),M=(0,l.g2)("a-table"),R=(0,l.g2)("a-tabs"),P=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(k,{title:"系统设置","sub-title":"配置系统参数和功能选项"}),(0,l.bF)(R,{activeKey:b.activeTab,"onUpdate:activeKey":a[36]||(a[36]=e=>b.activeTab=e),type:"card"},{default:(0,l.k6)(()=>[(0,l.bF)(C,{key:"system",tab:"系统配置"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{title:"基础配置",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.systemSettings,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"系统名称"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.systemSettings.systemName,"onUpdate:value":a[0]||(a[0]=e=>b.systemSettings.systemName=e),placeholder:"请输入系统名称"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"系统描述"},{default:(0,l.k6)(()=>[(0,l.bF)(_,{value:b.systemSettings.description,"onUpdate:value":a[1]||(a[1]=e=>b.systemSettings.description=e),rows:3,placeholder:"请输入系统描述"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"时区设置"},{default:(0,l.k6)(()=>[(0,l.bF)(v,{value:b.systemSettings.timezone,"onUpdate:value":a[2]||(a[2]=e=>b.systemSettings.timezone=e),placeholder:"选择时区"},{default:(0,l.k6)(()=>[(0,l.bF)(f,{value:"Asia/Shanghai"},{default:(0,l.k6)(()=>a[42]||(a[42]=[(0,l.eW)("Asia/Shanghai")])),_:1,__:[42]}),(0,l.bF)(f,{value:"UTC"},{default:(0,l.k6)(()=>a[43]||(a[43]=[(0,l.eW)("UTC")])),_:1,__:[43]}),(0,l.bF)(f,{value:"America/New_York"},{default:(0,l.k6)(()=>a[44]||(a[44]=[(0,l.eW)("America/New_York")])),_:1,__:[44]})]),_:1},8,["value"])]),_:1}),(0,l.bF)(y,{label:"语言设置"},{default:(0,l.k6)(()=>[(0,l.bF)(v,{value:b.systemSettings.language,"onUpdate:value":a[3]||(a[3]=e=>b.systemSettings.language=e),placeholder:"选择语言"},{default:(0,l.k6)(()=>[(0,l.bF)(f,{value:"zh-CN"},{default:(0,l.k6)(()=>a[45]||(a[45]=[(0,l.eW)("简体中文")])),_:1,__:[45]}),(0,l.bF)(f,{value:"en-US"},{default:(0,l.k6)(()=>a[46]||(a[46]=[(0,l.eW)("English")])),_:1,__:[46]})]),_:1},8,["value"])]),_:1}),(0,l.bF)(y,{label:"数据保留期"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.systemSettings.dataRetentionDays,"onUpdate:value":a[4]||(a[4]=e=>b.systemSettings.dataRetentionDays=e),min:30,max:3650,"addon-after":"天",style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:b.saveSystemSettings},{default:(0,l.k6)(()=>a[47]||(a[47]=[(0,l.eW)(" 保存配置 ")])),_:1,__:[47]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{title:"数据库配置",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.systemSettings.database,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"数据库类型"},{default:(0,l.k6)(()=>[(0,l.bF)(U,{color:"green"},{default:(0,l.k6)(()=>a[48]||(a[48]=[(0,l.eW)("MongoDB")])),_:1,__:[48]})]),_:1}),(0,l.bF)(y,{label:"连接状态"},{default:(0,l.k6)(()=>[(0,l.bF)(U,{color:b.systemSettings.database.connected?"green":"red"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(b.systemSettings.database.connected?"已连接":"未连接"),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)(y,{label:"数据库地址"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.systemSettings.database.host,"onUpdate:value":a[5]||(a[5]=e=>b.systemSettings.database.host=e),placeholder:"数据库地址"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"端口"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.systemSettings.database.port,"onUpdate:value":a[6]||(a[6]=e=>b.systemSettings.database.port=e),min:1,max:65535,style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:b.testDatabaseConnection},{default:(0,l.k6)(()=>a[49]||(a[49]=[(0,l.eW)(" 测试连接 ")])),_:1,__:[49]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),(0,l.bF)(C,{key:"analysis",tab:"分析引擎"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{title:"智能预处理模块",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.analysisSettings,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.analysisSettings.enabled,"onUpdate:checked":a[7]||(a[7]=e=>b.analysisSettings.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"过滤阈值"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{value:b.analysisSettings.threshold,"onUpdate:value":a[8]||(a[8]=e=>b.analysisSettings.threshold=e),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{title:"LLM分析模块",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.analysisSettings.llm,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.analysisSettings.llm.enabled,"onUpdate:checked":a[9]||(a[9]=e=>b.analysisSettings.llm.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"模型选择"},{default:(0,l.k6)(()=>[(0,l.bF)(v,{modelValue:b.analysisSettings.llm.model,"onUpdate:modelValue":a[10]||(a[10]=e=>b.analysisSettings.llm.model=e),placeholder:"选择LLM模型",loading:b.modelsLoading,onDropdownVisibleChange:b.onModelDropdownChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(b.availableModels,e=>((0,l.uX)(),(0,l.Wv)(f,{key:e.id,value:e.id},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.id)+" "+(0,s.v_)(e.owned_by?`(${e.owned_by})`:""),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","loading","onDropdownVisibleChange"]),b.modelsError?((0,l.uX)(),(0,l.CE)("div",n,(0,s.v_)(b.modelsError),1)):(0,l.Q3)("",!0),b.modelsSource?((0,l.uX)(),(0,l.CE)("div",o," 数据来源: "+(0,s.v_)(b.modelsSource),1)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(y,{label:"API密钥"},{default:(0,l.k6)(()=>[(0,l.bF)(A,{value:b.analysisSettings.llm.apiKey,"onUpdate:value":a[11]||(a[11]=e=>b.analysisSettings.llm.apiKey=e),placeholder:"请输入API密钥"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"温度参数"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{value:b.analysisSettings.llm.temperature,"onUpdate:value":a[12]||(a[12]=e=>b.analysisSettings.llm.temperature=e),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"最大令牌数"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.analysisSettings.llm.maxTokens,"onUpdate:value":a[13]||(a[13]=e=>b.analysisSettings.llm.maxTokens=e),min:100,max:8e3,style:{width:"200px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{title:"优先级评估引擎",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.analysisSettings.priority,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"启用状态"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.analysisSettings.priority.enabled,"onUpdate:checked":a[14]||(a[14]=e=>b.analysisSettings.priority.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"权重配置"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[a[50]||(a[50]=(0,l.Lk)("span",null,"用户影响权重:",-1)),(0,l.bF)(L,{value:b.analysisSettings.priority.weights.userImpact,"onUpdate:value":a[15]||(a[15]=e=>b.analysisSettings.priority.weights.userImpact=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),(0,l.Lk)("div",r,[a[51]||(a[51]=(0,l.Lk)("span",null,"技术复杂度权重:",-1)),(0,l.bF)(L,{value:b.analysisSettings.priority.weights.complexity,"onUpdate:value":a[16]||(a[16]=e=>b.analysisSettings.priority.weights.complexity=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])]),(0,l.Lk)("div",c,[a[52]||(a[52]=(0,l.Lk)("span",null,"商业价值权重:",-1)),(0,l.bF)(L,{value:b.analysisSettings.priority.weights.businessValue,"onUpdate:value":a[17]||(a[17]=e=>b.analysisSettings.priority.weights.businessValue=e),max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"])])])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:b.saveAnalysisSettings},{default:(0,l.k6)(()=>a[53]||(a[53]=[(0,l.eW)(" 保存分析引擎配置 ")])),_:1,__:[53]},8,["onClick"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(C,{key:"notifications",tab:"通知设置"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{title:"邮件通知",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.notificationSettings.email,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"启用邮件通知"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.notificationSettings.email.enabled,"onUpdate:checked":a[18]||(a[18]=e=>b.notificationSettings.email.enabled=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"SMTP服务器"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.notificationSettings.email.smtpHost,"onUpdate:value":a[19]||(a[19]=e=>b.notificationSettings.email.smtpHost=e),placeholder:"SMTP服务器地址"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"端口"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.notificationSettings.email.smtpPort,"onUpdate:value":a[20]||(a[20]=e=>b.notificationSettings.email.smtpPort=e),min:1,max:65535,style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"用户名"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.notificationSettings.email.username,"onUpdate:value":a[21]||(a[21]=e=>b.notificationSettings.email.username=e),placeholder:"邮箱用户名"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"密码"},{default:(0,l.k6)(()=>[(0,l.bF)(A,{value:b.notificationSettings.email.password,"onUpdate:value":a[22]||(a[22]=e=>b.notificationSettings.email.password=e),placeholder:"邮箱密码"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"发件人"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.notificationSettings.email.fromEmail,"onUpdate:value":a[23]||(a[23]=e=>b.notificationSettings.email.fromEmail=e),placeholder:"发件人邮箱"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{title:"通知规则",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.notificationSettings.rules,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"新反馈通知"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.notificationSettings.rules.newFeedback,"onUpdate:checked":a[24]||(a[24]=e=>b.notificationSettings.rules.newFeedback=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"高优先级问题"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.notificationSettings.rules.highPriority,"onUpdate:checked":a[25]||(a[25]=e=>b.notificationSettings.rules.highPriority=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"分析完成通知"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.notificationSettings.rules.analysisComplete,"onUpdate:checked":a[26]||(a[26]=e=>b.notificationSettings.rules.analysisComplete=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"报告生成通知"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.notificationSettings.rules.reportGenerated,"onUpdate:checked":a[27]||(a[27]=e=>b.notificationSettings.rules.reportGenerated=e)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:b.saveNotificationSettings},{default:(0,l.k6)(()=>a[54]||(a[54]=[(0,l.eW)(" 保存通知设置 ")])),_:1,__:[54]},8,["onClick"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(C,{key:"users",tab:"用户管理"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{title:"用户列表",class:"settings-card"},{extra:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:a[28]||(a[28]=e=>b.showAddUserModal=!0)},{default:(0,l.k6)(()=>[(0,l.bF)(W),a[55]||(a[55]=(0,l.eW)(" 添加用户 "))]),_:1,__:[55]})]),default:(0,l.k6)(()=>[(0,l.bF)(M,{columns:b.userColumns,"data-source":b.userList,loading:b.userLoading,pagination:!1},{bodyCell:(0,l.k6)(({column:e,record:t})=>["role"===e.key?((0,l.uX)(),(0,l.Wv)(U,{key:0,color:b.getRoleColor(t.role)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(b.getRoleText(t.role)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"status"===e.key?((0,l.uX)(),(0,l.Wv)(U,{key:1,color:"active"===t.status?"green":"red"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)("active"===t.status?"活跃":"禁用"),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"action"===e.key?((0,l.uX)(),(0,l.Wv)(K,{key:2},{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"link",size:"small",onClick:e=>b.editUser(t)},{default:(0,l.k6)(()=>a[56]||(a[56]=[(0,l.eW)(" 编辑 ")])),_:2,__:[56]},1032,["onClick"]),(0,l.bF)(h,{type:"link",size:"small",danger:"",onClick:e=>b.deleteUser(t)},{default:(0,l.k6)(()=>a[57]||(a[57]=[(0,l.eW)(" 删除 ")])),_:2,__:[57]},1032,["onClick"])]),_:2},1024)):(0,l.Q3)("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1})]),_:1}),(0,l.bF)(C,{key:"security",tab:"安全设置"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{title:"密码策略",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.securitySettings.password,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"最小长度"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.securitySettings.password.minLength,"onUpdate:value":a[29]||(a[29]=e=>b.securitySettings.password.minLength=e),min:6,max:32,style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"要求大写字母"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.securitySettings.password.requireUppercase,"onUpdate:checked":a[30]||(a[30]=e=>b.securitySettings.password.requireUppercase=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"要求小写字母"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.securitySettings.password.requireLowercase,"onUpdate:checked":a[31]||(a[31]=e=>b.securitySettings.password.requireLowercase=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"要求数字"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.securitySettings.password.requireNumbers,"onUpdate:checked":a[32]||(a[32]=e=>b.securitySettings.password.requireNumbers=e)},null,8,["checked"])]),_:1}),(0,l.bF)(y,{label:"要求特殊字符"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.securitySettings.password.requireSpecialChars,"onUpdate:checked":a[33]||(a[33]=e=>b.securitySettings.password.requireSpecialChars=e)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{title:"会话管理",class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.securitySettings.session,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"会话超时"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.securitySettings.session.timeout,"onUpdate:value":a[34]||(a[34]=e=>b.securitySettings.session.timeout=e),min:5,max:1440,"addon-after":"分钟",style:{width:"200px"}},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"记住登录"},{default:(0,l.k6)(()=>[(0,l.bF)(x,{checked:b.securitySettings.session.rememberLogin,"onUpdate:checked":a[35]||(a[35]=e=>b.securitySettings.session.rememberLogin=e)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,l.bF)(w,{class:"settings-card"},{default:(0,l.k6)(()=>[(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{type:"primary",onClick:b.saveSecuritySettings},{default:(0,l.k6)(()=>a[58]||(a[58]=[(0,l.eW)(" 保存安全设置 ")])),_:1,__:[58]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"]),(0,l.bF)(P,{visible:b.showAddUserModal,"onUpdate:visible":a[40]||(a[40]=e=>b.showAddUserModal=e),title:"添加用户",onOk:b.addUser,onCancel:a[41]||(a[41]=e=>b.showAddUserModal=!1)},{default:(0,l.k6)(()=>[(0,l.bF)(S,{model:b.userForm,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,l.k6)(()=>[(0,l.bF)(y,{label:"用户名"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.userForm.username,"onUpdate:value":a[37]||(a[37]=e=>b.userForm.username=e),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"邮箱"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{value:b.userForm.email,"onUpdate:value":a[38]||(a[38]=e=>b.userForm.email=e),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),(0,l.bF)(y,{label:"角色"},{default:(0,l.k6)(()=>[(0,l.bF)(v,{value:b.userForm.role,"onUpdate:value":a[39]||(a[39]=e=>b.userForm.role=e),placeholder:"选择角色"},{default:(0,l.k6)(()=>[(0,l.bF)(f,{value:"admin"},{default:(0,l.k6)(()=>a[59]||(a[59]=[(0,l.eW)("管理员")])),_:1,__:[59]}),(0,l.bF)(f,{value:"user"},{default:(0,l.k6)(()=>a[60]||(a[60]=[(0,l.eW)("普通用户")])),_:1,__:[60]}),(0,l.bF)(f,{value:"viewer"},{default:(0,l.k6)(()=>a[61]||(a[61]=[(0,l.eW)("只读用户")])),_:1,__:[61]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","onOk"])])}var m=t(144),p=t(7694),k=t(9804),g=t(5369),y=t(4288),_={name:"Settings",components:{UserAddOutlined:g.A},setup(){const e=(0,m.KR)("system"),a=(0,m.KR)(!1),t=(0,m.KR)(!1),s=(0,m.KR)([]),i=(0,m.KR)(!1),n=(0,m.KR)([]),o=(0,m.KR)(""),d=(0,m.KR)(""),u=(0,m.Kh)({systemName:"",description:"",timezone:"Asia/Shanghai",language:"zh-CN",dataRetentionDays:365,database:{connected:!0,host:"localhost",port:27017}}),r=(0,m.Kh)({enabled:!0,threshold:.7,llm:{enabled:!0,model:"gpt-4",apiKey:"",temperature:.3,maxTokens:2e3},priority:{enabled:!0,weights:{userImpact:.4,complexity:.3,businessValue:.3}}}),c=(0,m.Kh)({email:{enabled:!0,smtpHost:"smtp.gmail.com",smtpPort:587,username:"",password:"",fromEmail:""},rules:{newFeedback:!0,highPriority:!0,analysisComplete:!1,reportGenerated:!0}}),b=(0,m.Kh)({password:{minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!1},session:{timeout:30,rememberLogin:!0}}),g=(0,m.Kh)({username:"",email:"",role:void 0}),_=[{title:"用户名",dataIndex:"username",key:"username"},{title:"邮箱",dataIndex:"email",key:"email"},{title:"角色",dataIndex:"role",key:"role"},{title:"状态",dataIndex:"status",key:"status"},{title:"最后登录",dataIndex:"lastLogin",key:"lastLogin"},{title:"操作",key:"action",width:150}],f=e=>{const a={admin:"red",user:"blue",viewer:"green"};return a[e]||"default"},v=e=>{const a={admin:"管理员",user:"普通用户",viewer:"只读用户"};return a[e]||e},F=()=>{a.value=!0,setTimeout(()=>{s.value=[{id:1,username:"admin",email:"admin@example.com",role:"admin",status:"active",lastLogin:"2024-01-01 10:30:00"},{id:2,username:"user1",email:"user1@example.com",role:"user",status:"active",lastLogin:"2024-01-02 14:20:00"}],a.value=!1},1e3)},h=async()=>{try{const e=await y.YP.getSettings(),a=e.data;Object.assign(u,a.system),Object.assign(r,a.analysis),Object.assign(c,a.notification),Object.assign(b,a.security)}catch(e){p.Ay.error("加载设置失败")}},S=async()=>{try{const e={system:u,analysis:r,notification:c,security:b};await y.YP.updateSettings(e),p.Ay.success("设置已保存")}catch(e){p.Ay.error("保存设置失败")}},w=()=>S(),U=()=>S(),C=()=>S(),x=()=>S(),L=async()=>{if(!i.value){i.value=!0,o.value="",d.value="";try{const e=await y.YP.getLLMModels(),a=e.data;a.success?(n.value=a.models||[],d.value="theturbo.ai"===a.source?"theturbo.ai (实时)":a.source,p.Ay.success(`成功获取 ${n.value.length} 个可用模型`)):(n.value=a.models||[],d.value=a.source,o.value=`获取模型列表失败: ${a.error||"未知错误"}`,p.Ay.warning("使用备用模型列表"))}catch(e){console.error("加载模型列表失败:",e),o.value=`网络错误: ${e.message}`,n.value=[{id:"gpt-4",object:"model",owned_by:"openai"},{id:"gpt-3.5-turbo",object:"model",owned_by:"openai"},{id:"claude-3-haiku",object:"model",owned_by:"anthropic"},{id:"claude-3-sonnet",object:"model",owned_by:"anthropic"}],d.value="默认列表",p.Ay.error("无法获取模型列表，使用默认选项")}finally{i.value=!1}}},A=e=>{e&&0===n.value.length&&L()},W=()=>{p.Ay.success("数据库连接测试成功")},K=()=>{p.Ay.success("用户添加成功"),t.value=!1,F()},M=e=>{p.Ay.info(`编辑用户: ${e.username}`)},R=e=>{k.A.confirm({title:"确认删除",content:`确定要删除用户"${e.username}"吗？`,onOk(){p.Ay.success("用户已删除"),F()}})};return(0,l.sV)(()=>{h(),F(),L()}),{activeTab:e,userLoading:a,showAddUserModal:t,userList:s,systemSettings:u,analysisSettings:r,notificationSettings:c,securitySettings:b,userForm:g,userColumns:_,modelsLoading:i,availableModels:n,modelsError:o,modelsSource:d,loadAvailableModels:L,onModelDropdownChange:A,getRoleColor:f,getRoleText:v,loadUsers:F,saveSystemSettings:w,testDatabaseConnection:W,saveAnalysisSettings:U,saveNotificationSettings:C,saveSecuritySettings:x,addUser:K,editUser:M,deleteUser:R}}},f=t(1241);const v=(0,f.A)(_,[["render",b],["__scopeId","data-v-3640f1dd"]]);var F=v}}]);
//# sourceMappingURL=760.e8d865da.js.map