"use strict";(self["webpackChunkfeedback_analysis_enterprise"]=self["webpackChunkfeedback_analysis_enterprise"]||[]).push([[811],{3811:function(e,t,l){l.r(t),l.d(t,{default:function(){return W}});var a=l(6768),o=l(4232);const r={class:"reports"},d={class:"template-content"},i={class:"template-icon"},s={class:"template-title"},u={class:"template-description"},n={key:0},c={class:"report-preview"},p={class:"report-content"};function k(e,t,l,k,_,v){const b=(0,a.g2)("FileTextOutlined"),f=(0,a.g2)("a-button"),g=(0,a.g2)("a-page-header"),m=(0,a.g2)("a-statistic"),F=(0,a.g2)("a-card"),y=(0,a.g2)("a-col"),h=(0,a.g2)("a-row"),w=(0,a.g2)("a-select-option"),C=(0,a.g2)("a-select"),W=(0,a.g2)("a-space"),R=(0,a.g2)("a-tag"),T=(0,a.g2)("a-table"),x=(0,a.g2)("a-descriptions-item"),L=(0,a.g2)("a-descriptions"),O=(0,a.g2)("a-divider"),K=(0,a.g2)("a-drawer"),S=(0,a.g2)("a-input"),z=(0,a.g2)("a-form-item"),A=(0,a.g2)("a-range-picker"),D=(0,a.g2)("a-checkbox"),I=(0,a.g2)("a-checkbox-group"),X=(0,a.g2)("a-form"),U=(0,a.g2)("a-modal");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(g,{title:"分析报告","sub-title":"查看和管理系统分析报告"},{extra:(0,a.k6)(()=>[(0,a.bF)(f,{type:"primary",onClick:t[0]||(t[0]=e=>k.showGenerateDialog=!0)},{default:(0,a.k6)(()=>[(0,a.bF)(b),t[10]||(t[10]=(0,a.eW)(" 生成新报告 "))]),_:1,__:[10]})]),_:1}),(0,a.bF)(h,{gutter:16,class:"stats-row"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{span:6},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"stats-card"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{title:"总报告数",value:k.reportStats.total,"value-style":{color:"#3f8600"}},null,8,["value"])]),_:1})]),_:1}),(0,a.bF)(y,{span:6},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"stats-card"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{title:"本周生成",value:k.reportStats.thisWeek,"value-style":{color:"#1890ff"}},null,8,["value"])]),_:1})]),_:1}),(0,a.bF)(y,{span:6},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"stats-card"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{title:"自动生成",value:k.reportStats.automated,"value-style":{color:"#722ed1"}},null,8,["value"])]),_:1})]),_:1}),(0,a.bF)(y,{span:6},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"stats-card"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{title:"已下载",value:k.reportStats.downloaded,"value-style":{color:"#52c41a"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(F,{title:"快速报告模板",class:"templates-card"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{gutter:16},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.reportTemplates,e=>((0,a.uX)(),(0,a.Wv)(y,{span:6,key:e.id},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"template-card",hoverable:!0,onClick:t=>k.generateFromTemplate(e)},{default:(0,a.k6)(()=>[(0,a.Lk)("div",d,[(0,a.Lk)("div",i,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.icon),{style:(0,o.Tr)({color:e.color,fontSize:"32px"})},null,8,["style"]))]),(0,a.Lk)("div",s,(0,o.v_)(e.title),1),(0,a.Lk)("div",u,(0,o.v_)(e.description),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),(0,a.bF)(F,{title:"报告列表",class:"reports-list"},{extra:(0,a.k6)(()=>[(0,a.bF)(W,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{value:k.typeFilter,"onUpdate:value":t[1]||(t[1]=e=>k.typeFilter=e),placeholder:"报告类型",allowClear:"",onChange:k.loadReports,style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(w,{value:"weekly"},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.eW)("周报")])),_:1,__:[11]}),(0,a.bF)(w,{value:"monthly"},{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.eW)("月报")])),_:1,__:[12]}),(0,a.bF)(w,{value:"custom"},{default:(0,a.k6)(()=>t[13]||(t[13]=[(0,a.eW)("自定义")])),_:1,__:[13]}),(0,a.bF)(w,{value:"realtime"},{default:(0,a.k6)(()=>t[14]||(t[14]=[(0,a.eW)("实时")])),_:1,__:[14]})]),_:1},8,["value","onChange"]),(0,a.bF)(C,{value:k.statusFilter,"onUpdate:value":t[2]||(t[2]=e=>k.statusFilter=e),placeholder:"状态",allowClear:"",onChange:k.loadReports,style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(w,{value:"generating"},{default:(0,a.k6)(()=>t[15]||(t[15]=[(0,a.eW)("生成中")])),_:1,__:[15]}),(0,a.bF)(w,{value:"completed"},{default:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.eW)("已完成")])),_:1,__:[16]}),(0,a.bF)(w,{value:"failed"},{default:(0,a.k6)(()=>t[17]||(t[17]=[(0,a.eW)("失败")])),_:1,__:[17]})]),_:1},8,["value","onChange"])]),_:1})]),default:(0,a.k6)(()=>[(0,a.bF)(T,{columns:k.reportColumns,"data-source":k.reportList,loading:k.loading,pagination:k.pagination,onChange:k.handleTableChange},{bodyCell:(0,a.k6)(({column:e,record:l})=>["type"===e.key?((0,a.uX)(),(0,a.Wv)(R,{key:0,color:k.getTypeColor(l.type)},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.getTypeLabel(l.type)),1)]),_:2},1032,["color"])):(0,a.Q3)("",!0),"status"===e.key?((0,a.uX)(),(0,a.Wv)(R,{key:1,color:k.getStatusColor(l.status)},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.getStatusLabel(l.status)),1)]),_:2},1032,["color"])):(0,a.Q3)("",!0),"action"===e.key?((0,a.uX)(),(0,a.Wv)(W,{key:2},{default:(0,a.k6)(()=>[(0,a.bF)(f,{type:"link",size:"small",onClick:e=>k.viewReport(l)},{default:(0,a.k6)(()=>t[18]||(t[18]=[(0,a.eW)(" 预览 ")])),_:2,__:[18]},1032,["onClick"]),"completed"===l.status?((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"link",size:"small",onClick:e=>k.downloadReport(l)},{default:(0,a.k6)(()=>t[19]||(t[19]=[(0,a.eW)(" 下载 ")])),_:2,__:[19]},1032,["onClick"])):(0,a.Q3)("",!0),(0,a.bF)(f,{type:"link",size:"small",danger:"",onClick:e=>k.deleteReport(l)},{default:(0,a.k6)(()=>t[20]||(t[20]=[(0,a.eW)(" 删除 ")])),_:2,__:[20]},1032,["onClick"])]),_:2},1024)):(0,a.Q3)("",!0)]),_:1},8,["columns","data-source","loading","pagination","onChange"])]),_:1}),(0,a.bF)(K,{visible:k.showPreviewDrawer,"onUpdate:visible":t[3]||(t[3]=e=>k.showPreviewDrawer=e),title:"报告预览",placement:"right",width:"800"},{default:(0,a.k6)(()=>[k.selectedReport?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(L,{column:2,bordered:""},{default:(0,a.k6)(()=>[(0,a.bF)(x,{label:"报告标题",span:2},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.selectedReport.title),1)]),_:1}),(0,a.bF)(x,{label:"报告类型"},{default:(0,a.k6)(()=>[(0,a.bF)(R,{color:k.getTypeColor(k.selectedReport.type)},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.getTypeLabel(k.selectedReport.type)),1)]),_:1},8,["color"])]),_:1}),(0,a.bF)(x,{label:"生成时间"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.selectedReport.created_at),1)]),_:1}),(0,a.bF)(x,{label:"文件大小",span:2},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(k.selectedReport.size),1)]),_:1})]),_:1}),(0,a.bF)(O),(0,a.Lk)("div",c,[t[21]||(t[21]=(0,a.Lk)("h3",null,"报告内容预览",-1)),(0,a.Lk)("div",p,[(0,a.Lk)("p",null,(0,o.v_)(k.selectedReport.summary||"暂无预览内容"),1)])])])):(0,a.Q3)("",!0)]),_:1},8,["visible"]),(0,a.bF)(U,{visible:k.showGenerateDialog,"onUpdate:visible":t[8]||(t[8]=e=>k.showGenerateDialog=e),title:"生成新报告",onOk:k.confirmGenerate,onCancel:t[9]||(t[9]=e=>k.showGenerateDialog=!1),width:"600px"},{default:(0,a.k6)(()=>[(0,a.bF)(X,{model:k.reportForm,"label-col":{span:6},"wrapper-col":{span:18}},{default:(0,a.k6)(()=>[(0,a.bF)(z,{label:"报告标题"},{default:(0,a.k6)(()=>[(0,a.bF)(S,{value:k.reportForm.title,"onUpdate:value":t[4]||(t[4]=e=>k.reportForm.title=e),placeholder:"请输入报告标题"},null,8,["value"])]),_:1}),(0,a.bF)(z,{label:"报告类型"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{value:k.reportForm.type,"onUpdate:value":t[5]||(t[5]=e=>k.reportForm.type=e),placeholder:"请选择报告类型"},{default:(0,a.k6)(()=>[(0,a.bF)(w,{value:"weekly"},{default:(0,a.k6)(()=>t[22]||(t[22]=[(0,a.eW)("周报")])),_:1,__:[22]}),(0,a.bF)(w,{value:"monthly"},{default:(0,a.k6)(()=>t[23]||(t[23]=[(0,a.eW)("月报")])),_:1,__:[23]}),(0,a.bF)(w,{value:"custom"},{default:(0,a.k6)(()=>t[24]||(t[24]=[(0,a.eW)("自定义")])),_:1,__:[24]}),(0,a.bF)(w,{value:"realtime"},{default:(0,a.k6)(()=>t[25]||(t[25]=[(0,a.eW)("实时")])),_:1,__:[25]})]),_:1},8,["value"])]),_:1}),(0,a.bF)(z,{label:"时间范围"},{default:(0,a.k6)(()=>[(0,a.bF)(A,{value:k.reportForm.dateRange,"onUpdate:value":t[6]||(t[6]=e=>k.reportForm.dateRange=e),format:"YYYY-MM-DD"},null,8,["value"])]),_:1}),(0,a.bF)(z,{label:"包含模块"},{default:(0,a.k6)(()=>[(0,a.bF)(I,{value:k.reportForm.modules,"onUpdate:value":t[7]||(t[7]=e=>k.reportForm.modules=e)},{default:(0,a.k6)(()=>[(0,a.bF)(D,{value:"feedback"},{default:(0,a.k6)(()=>t[26]||(t[26]=[(0,a.eW)("反馈分析")])),_:1,__:[26]}),(0,a.bF)(D,{value:"issues"},{default:(0,a.k6)(()=>t[27]||(t[27]=[(0,a.eW)("问题统计")])),_:1,__:[27]}),(0,a.bF)(D,{value:"trends"},{default:(0,a.k6)(()=>t[28]||(t[28]=[(0,a.eW)("趋势分析")])),_:1,__:[28]}),(0,a.bF)(D,{value:"recommendations"},{default:(0,a.k6)(()=>t[29]||(t[29]=[(0,a.eW)("建议汇总")])),_:1,__:[29]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","onOk"])])}var _=l(144),v=l(7694),b=l(9804),f=l(8709),g=l(2451),m=l(4973),F=l(8028),y=l(9975),h={name:"Reports",components:{FileTextOutlined:f.A,BarChartOutlined:g.A,PieChartOutlined:m.A,LineChartOutlined:F.A,TrophyOutlined:y.A},setup(){const e=(0,_.KR)(!1),t=(0,_.KR)(!1),l=(0,_.KR)(!1),o=(0,_.KR)([]),r=(0,_.KR)(null),d=(0,_.KR)(void 0),i=(0,_.KR)(void 0),s=(0,_.KR)({total:42,thisWeek:8,automated:15,downloaded:28}),u=(0,_.KR)({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),n=(0,_.Kh)({title:"",type:void 0,dateRange:[],modules:[]}),c=(0,_.KR)([{id:1,title:"周度汇总",description:"生成本周反馈汇总报告",icon:"BarChartOutlined",color:"#1890ff"},{id:2,title:"月度分析",description:"生成月度深度分析报告",icon:"PieChartOutlined",color:"#52c41a"},{id:3,title:"趋势报告",description:"生成趋势分析报告",icon:"LineChartOutlined",color:"#faad14"},{id:4,title:"优先级报告",description:"生成问题优先级报告",icon:"TrophyOutlined",color:"#f5222d"}]),p=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"报告标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"类型",dataIndex:"type",key:"type",width:100},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"生成时间",dataIndex:"created_at",key:"created_at",width:150},{title:"文件大小",dataIndex:"size",key:"size",width:100},{title:"操作",key:"action",width:200,fixed:"right"}],k=e=>{const t={weekly:"blue",monthly:"green",custom:"orange",realtime:"purple"};return t[e]||"default"},f=e=>{const t={weekly:"周报",monthly:"月报",custom:"自定义",realtime:"实时"};return t[e]||e},g=e=>{const t={generating:"blue",completed:"green",failed:"red"};return t[e]||"default"},m=e=>{const t={generating:"生成中",completed:"已完成",failed:"失败"};return t[e]||e},F=()=>{e.value=!0,setTimeout(()=>{o.value=[{id:1,title:"用户反馈周报 - 2024年第1周",type:"weekly",status:"completed",created_at:"2024-01-01 10:30:00",size:"2.5MB",summary:"本周共收到用户反馈156条，其中功能建议占60%，问题报告占30%，其他占10%。"},{id:2,title:"月度分析报告 - 2024年1月",type:"monthly",status:"completed",created_at:"2024-01-02 14:20:00",size:"5.2MB",summary:"本月反馈量同比增长15%，用户满意度提升8%。"}],u.value.total=o.value.length,e.value=!1},1e3)},y=e=>{u.value=e,F()},h=e=>{v.Ay.success(`正在生成${e.title}...`),F()},w=e=>{r.value=e,t.value=!0},C=e=>{v.Ay.success(`开始下载报告: ${e.title}`)},W=e=>{b.A.confirm({title:"确认删除",content:`确定要删除报告"${e.title}"吗？`,onOk(){v.Ay.success("报告已删除"),F()}})},R=()=>{v.Ay.success("报告生成请求已提交"),l.value=!1,F()};return(0,a.sV)(()=>{F()}),{loading:e,showPreviewDrawer:t,showGenerateDialog:l,reportList:o,reportStats:s,selectedReport:r,typeFilter:d,statusFilter:i,pagination:u,reportForm:n,reportTemplates:c,reportColumns:p,getTypeColor:k,getTypeLabel:f,getStatusColor:g,getStatusLabel:m,loadReports:F,handleTableChange:y,generateFromTemplate:h,viewReport:w,downloadReport:C,deleteReport:W,confirmGenerate:R}}},w=l(1241);const C=(0,w.A)(h,[["render",k],["__scopeId","data-v-15672f14"]]);var W=C}}]);
//# sourceMappingURL=811.85f6e935.js.map