"use strict";(self["webpackChunkfeedback_analysis_enterprise"]=self["webpackChunkfeedback_analysis_enterprise"]||[]).push([[801],{3801:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var l=a(6768),n=a(4232);const r={class:"feedback-management"},o={key:0,class:"feedback-wrapper"},s={class:"feedback-card"},i={key:0,class:"feedback-header"},d={class:"feedback-title"},c={class:"feedback-body"},u={key:0,class:"keywords-section"},g={class:"keywords-text"},_={key:1,class:"analysis-status"},k={class:"analysis-indicators"},b={key:0,class:"analysis-check ai-analyzed",title:"å·²å®ŒæˆAIåˆ†æ"},p={key:1,class:"analysis-check pre-filtered",title:"å·²é¢„ç­›é€‰å¤„ç†"},y=["title"],v=["title"],f={key:3,class:"status-indicator"},m={class:"status-text"},F={key:5,class:"time-display"},h={class:"relative-time"},C={class:"absolute-time"},w={key:0},A={class:"feedback-content"};function S(e,t,a,S,W,x){const O=(0,l.g2)("a-button"),L=(0,l.g2)("PlusOutlined"),z=(0,l.g2)("a-space"),I=(0,l.g2)("a-page-header"),T=(0,l.g2)("SearchOutlined"),$=(0,l.g2)("a-input"),E=(0,l.g2)("a-col"),R=(0,l.g2)("a-select-option"),X=(0,l.g2)("a-select"),Q=(0,l.g2)("a-row"),U=(0,l.g2)("a-card"),D=(0,l.g2)("a-tag"),K=(0,l.g2)("a-table"),P=(0,l.g2)("a-form-item"),M=(0,l.g2)("a-textarea"),q=(0,l.g2)("a-form"),j=(0,l.g2)("a-modal"),B=(0,l.g2)("a-descriptions-item"),G=(0,l.g2)("a-descriptions"),V=(0,l.g2)("a-drawer");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(I,{title:"åé¦ˆç®¡ç†","sub-title":"ç®¡ç†å’Œå¤„ç†ç”¨æˆ·åé¦ˆ"},{extra:(0,l.k6)(()=>[(0,l.bF)(z,null,{default:(0,l.k6)(()=>[(0,l.bF)(O,{type:"primary",loading:S.analyzing,onClick:S.triggerAnalyzeAll,style:{background:"#52c41a","border-color":"#52c41a"}},{default:(0,l.k6)(()=>t[11]||(t[11]=[(0,l.eW)(" ğŸ¤– ä¸€é”®AIåˆ†æ ")])),_:1,__:[11]},8,["loading","onClick"]),(0,l.bF)(O,{type:"primary",loading:S.reanalyzing,onClick:S.triggerForceReanalyze,style:{background:"#722ed1","border-color":"#722ed1"}},{default:(0,l.k6)(()=>t[12]||(t[12]=[(0,l.eW)(" ğŸ”„ ä¼˜åŒ–é‡æ–°åˆ†æ ")])),_:1,__:[12]},8,["loading","onClick"]),(0,l.bF)(O,{type:"primary",onClick:t[0]||(t[0]=e=>S.showCreateDialog=!0)},{default:(0,l.k6)(()=>[(0,l.bF)(L),t[13]||(t[13]=(0,l.eW)(" æ·»åŠ åé¦ˆ "))]),_:1,__:[13]})]),_:1})]),_:1}),(0,l.bF)(U,{class:"filter-card"},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(E,{span:8},{default:(0,l.k6)(()=>[(0,l.bF)($,{value:S.searchQuery,"onUpdate:value":t[1]||(t[1]=e=>S.searchQuery=e),placeholder:"æœç´¢åé¦ˆå†…å®¹...",onPressEnter:S.handleSearch,allowClear:""},{prefix:(0,l.k6)(()=>[(0,l.bF)(T)]),_:1},8,["value","onPressEnter"])]),_:1}),(0,l.bF)(E,{span:5},{default:(0,l.k6)(()=>[(0,l.bF)(X,{value:S.statusFilter,"onUpdate:value":t[2]||(t[2]=e=>S.statusFilter=e),placeholder:"é€‰æ‹©çŠ¶æ€",onChange:S.loadFeedback,allowClear:"",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(R,{value:"pending"},{default:(0,l.k6)(()=>t[14]||(t[14]=[(0,l.eW)("å¾…å¤„ç†")])),_:1,__:[14]}),(0,l.bF)(R,{value:"processing"},{default:(0,l.k6)(()=>t[15]||(t[15]=[(0,l.eW)("å¤„ç†ä¸­")])),_:1,__:[15]}),(0,l.bF)(R,{value:"completed"},{default:(0,l.k6)(()=>t[16]||(t[16]=[(0,l.eW)("å·²å®Œæˆ")])),_:1,__:[16]}),(0,l.bF)(R,{value:"rejected"},{default:(0,l.k6)(()=>t[17]||(t[17]=[(0,l.eW)("å·²æ‹’ç»")])),_:1,__:[17]})]),_:1},8,["value","onChange"])]),_:1}),(0,l.bF)(E,{span:5},{default:(0,l.k6)(()=>[(0,l.bF)(X,{value:S.categoryFilter,"onUpdate:value":t[3]||(t[3]=e=>S.categoryFilter=e),placeholder:"é€‰æ‹©åˆ†ç±»",onChange:S.loadFeedback,allowClear:"",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(R,{value:"feature"},{default:(0,l.k6)(()=>t[18]||(t[18]=[(0,l.eW)("åŠŸèƒ½å»ºè®®")])),_:1,__:[18]}),(0,l.bF)(R,{value:"bug"},{default:(0,l.k6)(()=>t[19]||(t[19]=[(0,l.eW)("é—®é¢˜æŠ¥å‘Š")])),_:1,__:[19]}),(0,l.bF)(R,{value:"ux"},{default:(0,l.k6)(()=>t[20]||(t[20]=[(0,l.eW)("ç”¨æˆ·ä½“éªŒ")])),_:1,__:[20]}),(0,l.bF)(R,{value:"performance"},{default:(0,l.k6)(()=>t[21]||(t[21]=[(0,l.eW)("æ€§èƒ½ä¼˜åŒ–")])),_:1,__:[21]}),(0,l.bF)(R,{value:"other"},{default:(0,l.k6)(()=>t[22]||(t[22]=[(0,l.eW)("å…¶ä»–")])),_:1,__:[22]})]),_:1},8,["value","onChange"])]),_:1}),(0,l.bF)(E,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(z,null,{default:(0,l.k6)(()=>[(0,l.bF)(O,{type:"primary",onClick:S.loadFeedback},{default:(0,l.k6)(()=>t[23]||(t[23]=[(0,l.eW)("æœç´¢")])),_:1,__:[23]},8,["onClick"]),(0,l.bF)(O,{onClick:S.resetFilters},{default:(0,l.k6)(()=>t[24]||(t[24]=[(0,l.eW)("é‡ç½®")])),_:1,__:[24]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,l.bF)(U,{class:"table-card"},{default:(0,l.k6)(()=>[(0,l.bF)(K,{columns:S.feedbackColumns,"data-source":S.feedbackList,loading:S.loading,pagination:S.pagination,"row-selection":S.rowSelection,onChange:S.handleTableChange,size:"small"},{bodyCell:(0,l.k6)(({column:e,record:a})=>["feedback_content"===e.key?((0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",s,[S.getFeedbackTitle(a)?((0,l.uX)(),(0,l.CE)("div",i,[t[25]||(t[25]=(0,l.Lk)("span",{class:"title-icon"},"ğŸ’¬",-1)),(0,l.Lk)("span",d,(0,n.v_)(S.getFeedbackTitle(a)),1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",c,[(0,l.Lk)("div",{class:(0,n.C4)(["feedback-content",{expanded:a.expanded}])},(0,n.v_)(S.getFeedbackContent(a)),3),a.keywords&&a.keywords.length>0?((0,l.uX)(),(0,l.CE)("div",u,[t[26]||(t[26]=(0,l.Lk)("span",{class:"keywords-label"},"ğŸ·ï¸ å…³é”®è¯ï¼š",-1)),(0,l.Lk)("span",g,(0,n.v_)(a.keywords.slice(0,5).join(" Â· "))+(0,n.v_)(a.keywords.length>5?"...":""),1)])):(0,l.Q3)("",!0),a.analysis_result||a.processing_status?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.Lk)("span",k,[a.analysis_result&&"multi_model_ai"===a.analysis_result.analysis_method||a.processing_status&&"multi_model_ai"===a.processing_status.analysis_method?((0,l.uX)(),(0,l.CE)("span",b," âœ… AIåˆ†æ ")):a.analysis_result&&"intelligent_filter"===a.analysis_result.analysis_method||a.processing_status&&"intelligent_filter"===a.processing_status.analysis_method?((0,l.uX)(),(0,l.CE)("span",p," âš¡ é¢„ç­›é€‰ ")):(0,l.Q3)("",!0),a.sentiment?((0,l.uX)(),(0,l.CE)("span",{key:2,class:(0,n.C4)(["sentiment-indicator",`sentiment-${a.sentiment}`]),title:`æƒ…æ„Ÿï¼š${S.getSentimentLabel(a.sentiment)}`},(0,n.v_)(S.getSentimentLabel(a.sentiment)),11,y)):(0,l.Q3)("",!0),a.ai_confidence&&a.ai_confidence>0?((0,l.uX)(),(0,l.CE)("span",{key:3,class:"confidence-indicator",title:`AIåˆ†æç½®ä¿¡åº¦ï¼š${Math.round(100*a.ai_confidence)}%`},(0,n.v_)(Math.round(100*a.ai_confidence))+"% ",9,v)):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0),S.needsExpansion(a)?((0,l.uX)(),(0,l.Wv)(O,{key:2,type:"link",size:"small",class:"expand-btn",onClick:e=>S.toggleExpansion(a)},{icon:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(a.expanded?"UpOutlined":"DownOutlined")))]),default:(0,l.k6)(()=>[(0,l.eW)(" "+(0,n.v_)(a.expanded?"æ”¶èµ·":"å±•å¼€"),1)]),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])])])):(0,l.Q3)("",!0),"source"===e.key?((0,l.uX)(),(0,l.Wv)(D,{key:1,color:S.getSourceColor(a.source),class:"modern-source-tag"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(S.getSourceIcon(a.source)),{class:"tag-icon"})),(0,l.Lk)("span",null,(0,n.v_)(S.getSourceLabel(a.source)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"category"===e.key?((0,l.uX)(),(0,l.Wv)(D,{key:2,color:S.getCategoryColor(a.category),class:"category-main-tag"},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.getCategoryLabel(a.category)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"status"===e.key?((0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("span",{class:(0,n.C4)(["status-dot",S.getStatusClass(a.status)])},null,2),(0,l.Lk)("span",m,(0,n.v_)(S.getStatusLabel(a.status)),1)])):(0,l.Q3)("",!0),"priority"===e.key?((0,l.uX)(),(0,l.Wv)(D,{key:4,color:S.getPriorityColor(a.priority),class:"priority-badge"},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.getPriorityText(a.priority)),1)]),_:2},1032,["color"])):(0,l.Q3)("",!0),"created_at"===e.key?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.Lk)("div",h,(0,n.v_)(S.getRelativeTime(a.created_at)),1),(0,l.Lk)("div",C,(0,n.v_)(S.formatAbsoluteTime(a.created_at)),1)])):(0,l.Q3)("",!0)]),_:1},8,["columns","data-source","loading","pagination","row-selection","onChange"])]),_:1}),(0,l.bF)(j,{visible:S.showCreateDialog,"onUpdate:visible":t[9]||(t[9]=e=>S.showCreateDialog=e),title:S.editingFeedback?"ç¼–è¾‘åé¦ˆ":"åˆ›å»ºåé¦ˆ",onOk:S.saveFeedback,onCancel:S.cancelEdit,width:"600px"},{default:(0,l.k6)(()=>[(0,l.bF)(q,{model:S.feedbackForm,"label-col":{span:6},"wrapper-col":{span:18},ref:"feedbackFormRef"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{label:"æ ‡é¢˜",name:"title",rules:[{required:!0,message:"è¯·è¾“å…¥åé¦ˆæ ‡é¢˜"}]},{default:(0,l.k6)(()=>[(0,l.bF)($,{value:S.feedbackForm.title,"onUpdate:value":t[4]||(t[4]=e=>S.feedbackForm.title=e),placeholder:"è¯·è¾“å…¥åé¦ˆæ ‡é¢˜"},null,8,["value"])]),_:1}),(0,l.bF)(P,{label:"å†…å®¹",name:"content",rules:[{required:!0,message:"è¯·è¾“å…¥åé¦ˆå†…å®¹"}]},{default:(0,l.k6)(()=>[(0,l.bF)(M,{value:S.feedbackForm.content,"onUpdate:value":t[5]||(t[5]=e=>S.feedbackForm.content=e),rows:4,placeholder:"è¯·è¯¦ç»†æè¿°æ‚¨çš„åé¦ˆ..."},null,8,["value"])]),_:1}),(0,l.bF)(P,{label:"åˆ†ç±»",name:"category",rules:[{required:!0,message:"è¯·é€‰æ‹©åé¦ˆåˆ†ç±»"}]},{default:(0,l.k6)(()=>[(0,l.bF)(X,{value:S.feedbackForm.category,"onUpdate:value":t[6]||(t[6]=e=>S.feedbackForm.category=e),placeholder:"è¯·é€‰æ‹©åˆ†ç±»"},{default:(0,l.k6)(()=>[(0,l.bF)(R,{value:"feature"},{default:(0,l.k6)(()=>t[27]||(t[27]=[(0,l.eW)("åŠŸèƒ½å»ºè®®")])),_:1,__:[27]}),(0,l.bF)(R,{value:"bug"},{default:(0,l.k6)(()=>t[28]||(t[28]=[(0,l.eW)("é—®é¢˜æŠ¥å‘Š")])),_:1,__:[28]}),(0,l.bF)(R,{value:"ux"},{default:(0,l.k6)(()=>t[29]||(t[29]=[(0,l.eW)("ç”¨æˆ·ä½“éªŒ")])),_:1,__:[29]}),(0,l.bF)(R,{value:"performance"},{default:(0,l.k6)(()=>t[30]||(t[30]=[(0,l.eW)("æ€§èƒ½ä¼˜åŒ–")])),_:1,__:[30]}),(0,l.bF)(R,{value:"other"},{default:(0,l.k6)(()=>t[31]||(t[31]=[(0,l.eW)("å…¶ä»–")])),_:1,__:[31]})]),_:1},8,["value"])]),_:1}),(0,l.bF)(P,{label:"ä¼˜å…ˆçº§",name:"priority"},{default:(0,l.k6)(()=>[(0,l.bF)(X,{value:S.feedbackForm.priority,"onUpdate:value":t[7]||(t[7]=e=>S.feedbackForm.priority=e),placeholder:"è¯·é€‰æ‹©ä¼˜å…ˆçº§"},{default:(0,l.k6)(()=>[(0,l.bF)(R,{value:"low"},{default:(0,l.k6)(()=>t[32]||(t[32]=[(0,l.eW)("ä½")])),_:1,__:[32]}),(0,l.bF)(R,{value:"normal"},{default:(0,l.k6)(()=>t[33]||(t[33]=[(0,l.eW)("æ™®é€š")])),_:1,__:[33]}),(0,l.bF)(R,{value:"high"},{default:(0,l.k6)(()=>t[34]||(t[34]=[(0,l.eW)("é«˜")])),_:1,__:[34]}),(0,l.bF)(R,{value:"urgent"},{default:(0,l.k6)(()=>t[35]||(t[35]=[(0,l.eW)("ç´§æ€¥")])),_:1,__:[35]})]),_:1},8,["value"])]),_:1}),(0,l.bF)(P,{label:"è”ç³»é‚®ç®±",name:"email"},{default:(0,l.k6)(()=>[(0,l.bF)($,{value:S.feedbackForm.email,"onUpdate:value":t[8]||(t[8]=e=>S.feedbackForm.email=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","onOk","onCancel"]),(0,l.bF)(V,{visible:S.showViewDialog,"onUpdate:visible":t[10]||(t[10]=e=>S.showViewDialog=e),title:"åé¦ˆè¯¦æƒ…",placement:"right",width:"600"},{default:(0,l.k6)(()=>[S.selectedFeedback?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.bF)(G,{column:2,bordered:""},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"ID"},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.selectedFeedback.id),1)]),_:1}),(0,l.bF)(B,{label:"çŠ¶æ€"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{color:S.getStatusColor(S.selectedFeedback.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.getStatusLabel(S.selectedFeedback.status)),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)(B,{label:"æ ‡é¢˜",span:2},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.selectedFeedback.title),1)]),_:1}),(0,l.bF)(B,{label:"åˆ†ç±»"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{color:S.getCategoryColor(S.selectedFeedback.category)},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.getCategoryLabel(S.selectedFeedback.category)),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)(B,{label:"ä¼˜å…ˆçº§"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{color:S.getPriorityColor(S.selectedFeedback.priority)},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.getPriorityText(S.selectedFeedback.priority)),1)]),_:1},8,["color"])]),_:1}),(0,l.bF)(B,{label:"åˆ›å»ºæ—¶é—´",span:2},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.selectedFeedback.created_at),1)]),_:1}),(0,l.bF)(B,{label:"è”ç³»é‚®ç®±",span:2},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(S.selectedFeedback.email||"æœªæä¾›"),1)]),_:1}),(0,l.bF)(B,{label:"åé¦ˆå†…å®¹",span:2},{default:(0,l.k6)(()=>[(0,l.Lk)("div",A,(0,n.v_)(S.selectedFeedback.content),1)]),_:1})]),_:1})])):(0,l.Q3)("",!0)]),_:1},8,["visible"])])}var W=a(144),x=a(7694),O=a(9804),L=a(3536),z=a(7520),I=a(5862),T=a(9070),$=a(6638),E=a(6712),R=a(1855),X=a(7084),Q=a(6697),U=a(6736),D=a(5389),K=a(4288),P={name:"FeedbackManagement",components:{PlusOutlined:L.A,SearchOutlined:z.A,AppleOutlined:I.A,AndroidOutlined:T.A,GlobalOutlined:$.A,TeamOutlined:E.A,CustomerServiceOutlined:R.A,SettingOutlined:X.A,UserOutlined:Q.A,UpOutlined:U.A,DownOutlined:D.A},setup(){const e=(0,W.KR)(!1),t=(0,W.KR)(!1),a=(0,W.KR)(!1),n=(0,W.KR)([]),r=(0,W.KR)(null),o=(0,W.KR)(!1),s=(0,W.KR)(!1),i=(0,W.KR)(null),d=(0,W.KR)(null),c=(0,W.KR)(""),u=(0,W.KR)(void 0),g=(0,W.KR)(void 0),_=(0,W.KR)({current:1,pageSize:50,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`ç¬¬ ${t[0]}-${t[1]} æ¡ï¼Œå…± ${e} æ¡`,pageSizeOptions:["20","50","100","200"]}),k=(0,W.Kh)({title:"",content:"",category:void 0,priority:"normal",email:""}),b=[{title:"åé¦ˆå†…å®¹",dataIndex:"feedback_content",key:"feedback_content",ellipsis:!0,width:"55%"},{title:"æ¥æºæ¸ é“",dataIndex:"source",key:"source",width:"12%",align:"center"},{title:"é—®é¢˜åˆ†ç±»",dataIndex:"category",key:"category",width:"10%",align:"center"},{title:"å¤„ç†çŠ¶æ€",dataIndex:"status",key:"status",width:"10%",align:"center"},{title:"ä¼˜å…ˆçº§",dataIndex:"priority",key:"priority",width:"8%",align:"center"},{title:"æäº¤æ—¶é—´",dataIndex:"created_at",key:"created_at",width:"10%",align:"center"}],p={onChange:(e,t)=>{console.log("é€‰ä¸­çš„åé¦ˆ:",t)}},y=e=>{const t={pending:"orange",processing:"blue",completed:"green",rejected:"red"};return t[e]||"default"},v=e=>{const t={pending:"å¾…å¤„ç†",processing:"å¤„ç†ä¸­",completed:"å·²å®Œæˆ",rejected:"å·²æ‹’ç»"};return t[e]||e},f=e=>{const t={feature:"blue",feature_request:"blue",bug:"red",bug_report:"red",ux:"green",ux_complaint:"green",performance:"orange",question:"cyan",praise:"green",general:"default",other:"default"};return t[e]||"default"},m=e=>{const t={feature:"åŠŸèƒ½å»ºè®®",feature_request:"åŠŸèƒ½éœ€æ±‚",bug:"é—®é¢˜æŠ¥å‘Š",bug_report:"BugæŠ¥å‘Š",ux:"ç”¨æˆ·ä½“éªŒ",ux_complaint:"UXæŠ•è¯‰",performance:"æ€§èƒ½ä¼˜åŒ–",question:"å’¨è¯¢é—®é¢˜",praise:"è¡¨æ‰¬åé¦ˆ",general:"é€šç”¨åé¦ˆ",other:"å…¶ä»–"};return t[e]||e},F=e=>{const t={low:"green",medium:"orange",normal:"orange",high:"red",urgent:"volcano"};return t[e]||"orange"},h=e=>{const t={low:"ä½",medium:"ä¸­ç­‰",normal:"æ™®é€š",high:"é«˜",urgent:"ç´§æ€¥"};return t[e]||e},C=e=>{if(e.title&&e.title.trim()){const t=e.title.replace(/\s+/g," ").trim();return t.length>30?t.substring(0,30)+"...":t}const t=e.original_text||e.content||e.original_content||e.processed_text||"";if(t){const e=t.replace(/\s+/g," ").trim();return e.length>20?e.substring(0,20)+"...":e}return"æ— æ ‡é¢˜"},w=e=>{const t=e.original_text||e.content||e.original_content||e.processed_text||"";if(!t)return"æš‚æ— å†…å®¹";const a=t.replace(/[ \t]+/g," ").trim();return e.expanded?a:a.length>120?a.substring(0,120)+"...":a},A=e=>{const t=e.original_text||e.content||e.original_content||e.processed_text||"",a=t.replace(/[ \t]+/g," ").trim();return a.length>120},S=e=>{const t=n.value.findIndex(t=>t._id===e._id);-1!==t&&(n.value[t].expanded=!n.value[t].expanded)},L=e=>{const t={app_store:"AppleOutlined",google_play:"AndroidOutlined",social_media:"GlobalOutlined",internal:"TeamOutlined",zendesk:"CustomerServiceOutlined",user_survey:"SettingOutlined"};return t[e]||"SettingOutlined"},z=e=>{const t={app_store:"App Store",ios_app_store:"iOS App Store",android_app_store:"Androidåº”ç”¨å¸‚åœº",google_play:"Google Play",huawei_app_store:"åä¸ºåº”ç”¨å¸‚åœº",xiaomi_app_store:"å°ç±³åº”ç”¨å¸‚åœº",vivo_app_store:"vivoåº”ç”¨å¸‚åœº",oppo_app_store:"OPPOåº”ç”¨å¸‚åœº",meizu_app_store:"é­…æ—åº”ç”¨å¸‚åœº",social_media:"ç¤¾äº¤å¹³å°",internal:"å†…éƒ¨ç³»ç»Ÿ",zendesk:"å®¢æœå·¥å•",user_survey:"ç”¨æˆ·è°ƒç ”"};return t[e]||e||"Unknown"},I=e=>{const t={positive:"green",negative:"red",neutral:"default"};return t[e]||"default"},T=e=>{const t={positive:"æ­£é¢",negative:"è´Ÿé¢",neutral:"ä¸­æ€§"};return t[e]||e},$=e=>{const t={multi_model_ai:"green",intelligent_filter:"orange",content_empty:"red",manual:"blue"};return t[e]||"default"},E=e=>{const t={multi_model_ai:"AIåˆ†æ",intelligent_filter:"é¢„ç­›é€‰",content_empty:"å†…å®¹ç©º",manual:"æ‰‹åŠ¨"};return t[e]||e},R=e=>e&&"none"!==e?e.includes("gemini")?"Gemini":e.includes("gpt")?"GPT":e.includes("claude")?"Claude":"default"===e?"é»˜è®¤":"intelligent_filter"===e?"é¢„ç­›é€‰":e.substring(0,10):"",X=e=>{const t={app_store:"blue",google_play:"green",social_media:"purple",internal:"orange",zendesk:"cyan",user_survey:"geekblue"};return t[e]||"default"},Q=e=>{const t={pending:"status-pending",in_progress:"status-processing",resolved:"status-success",closed:"status-default"};return t[e]||"status-default"},U=e=>{if(!e)return"--";try{const t=new Date(e),a=new Date,l=a.getTime()-t.getTime(),n=Math.floor(l/6e4),r=Math.floor(l/36e5),o=Math.floor(l/864e5);return n<1?"åˆšåˆš":n<60?`${n}åˆ†é’Ÿå‰`:r<24?`${r}å°æ—¶å‰`:o<7?`${o}å¤©å‰`:o<30?`${Math.floor(o/7)}å‘¨å‰`:`${Math.floor(o/30)}ä¸ªæœˆå‰`}catch(t){return"--"}},D=e=>{if(!e)return"--";try{const t=new Date(e),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),n=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${a}-${l} ${n}:${r}`}catch(t){return"--"}},P=async()=>{e.value=!0;try{const e={skip:(_.value.current-1)*_.value.pageSize,limit:_.value.pageSize};u.value&&(e.status=u.value),g.value&&(e.source=g.value);const t=await K.WB.getFeedbacks(e);t.data&&(n.value=(t.data.data||[]).map(e=>({...e,expanded:!1})),_.value.total=t.data.total||0,console.log("âœ… ä»æ•°æ®åº“åŠ è½½åé¦ˆæ•°æ®:",{"æ€»æ•°":_.value.total,"å½“å‰é¡µ":n.value.length,"é¡µç ":_.value.current}))}catch(t){console.error("âŒ åŠ è½½åé¦ˆæ•°æ®å¤±è´¥:",t),x.Ay.error("åŠ è½½åé¦ˆæ•°æ®å¤±è´¥ï¼š"+(t.response?.data?.detail||t.message)),n.value=[],_.value.total=0}finally{e.value=!1}},M=()=>{_.value.current=1,P()},q=()=>{c.value="",u.value=void 0,g.value=void 0,_.value.current=1,P()},j=(e,t,a)=>{_.value=e,P()},B=e=>{r.value=e,s.value=!0},G=e=>{i.value=e,Object.assign(k,{title:e.title,content:e.content,category:e.category,priority:e.priority,email:e.email}),o.value=!0},V=e=>{O.A.confirm({title:"ç¡®è®¤åˆ†æ",content:"ç¡®å®šè¦å¯¹æ­¤åé¦ˆè¿›è¡Œæ™ºèƒ½åˆ†æå—ï¼Ÿ",onOk(){x.Ay.success("åˆ†æä»»åŠ¡å·²å¯åŠ¨"),P()}})},H=async e=>{O.A.confirm({title:"ç¡®è®¤åˆ é™¤",content:`ç¡®å®šè¦åˆ é™¤åé¦ˆ"${e.title}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,okType:"danger",async onOk(){try{await K.WB.deleteFeedback(e.id),x.Ay.success("åé¦ˆåˆ é™¤æˆåŠŸ"),P()}catch(t){x.Ay.error("åˆ é™¤å¤±è´¥ï¼š"+(t.response?.data?.detail||t.message))}}})},J=()=>{d.value.validate().then(()=>{i.value?x.Ay.success("åé¦ˆæ›´æ–°æˆåŠŸ"):x.Ay.success("åé¦ˆåˆ›å»ºæˆåŠŸ"),o.value=!1,Y(),P()}).catch(()=>{x.Ay.error("è¯·æ£€æŸ¥è¡¨å•å†…å®¹")})},N=()=>{o.value=!1,Y()},Y=()=>{Object.assign(k,{title:"",content:"",category:void 0,priority:"normal",email:""}),i.value=null,d.value?.resetFields()};(0,l.sV)(()=>{P()});const Z=async()=>{t.value=!0;try{const e=await K.WB.analyzeAllUnprocessed(),t=e.data;0===t.unanalyzed_count?x.Ay.success("ğŸ‰ æ‰€æœ‰åé¦ˆæ•°æ®éƒ½å·²å®ŒæˆAIåˆ†æï¼"):(x.Ay.success(`ğŸš€ æˆåŠŸå¯åŠ¨AIåˆ†æï¼æ­£åœ¨å¤„ç† ${t.unanalyzed_count} æ¡åé¦ˆæ•°æ®ï¼Œé¢„è®¡éœ€è¦ ${t.analysis_details.estimated_time}`),setTimeout(()=>{P()},3e3)),console.log("âœ… AIåˆ†æä»»åŠ¡å¯åŠ¨æˆåŠŸ:",t)}catch(e){console.error("âŒ AIåˆ†æå¯åŠ¨å¤±è´¥:",e),x.Ay.error("AIåˆ†æå¯åŠ¨å¤±è´¥ï¼š"+(e.response?.data?.detail||e.message))}finally{t.value=!1}},ee=async()=>{a.value=!0;try{const e=await K.WB.forceReanalyzeAll(),t=e.data;x.Ay.success(`ğŸ”„ ${t.message}`),setTimeout(()=>{P()},5e3),console.log("âœ… å¼ºåˆ¶é‡æ–°åˆ†æå¯åŠ¨æˆåŠŸ:",t)}catch(e){console.error("âŒ å¼ºåˆ¶é‡æ–°åˆ†æå¯åŠ¨å¤±è´¥:",e),x.Ay.error("å¼ºåˆ¶é‡æ–°åˆ†æå¯åŠ¨å¤±è´¥ï¼š"+(e.response?.data?.detail||e.message))}finally{a.value=!1}};return{loading:e,analyzing:t,reanalyzing:a,feedbackList:n,selectedFeedback:r,showCreateDialog:o,showViewDialog:s,editingFeedback:i,feedbackFormRef:d,searchQuery:c,statusFilter:u,categoryFilter:g,pagination:_,feedbackForm:k,feedbackColumns:b,rowSelection:p,getStatusColor:y,getStatusLabel:v,getCategoryColor:f,getCategoryLabel:m,getPriorityColor:F,getPriorityText:h,getFeedbackTitle:C,getFeedbackContent:w,needsExpansion:A,toggleExpansion:S,getSourceIcon:L,getSourceLabel:z,getSourceColor:X,getStatusClass:Q,getRelativeTime:U,formatAbsoluteTime:D,getSentimentColor:I,getSentimentLabel:T,getAnalysisMethodColor:$,getAnalysisMethodLabel:E,getModelLabel:R,loadFeedback:P,handleSearch:M,resetFilters:q,handleTableChange:j,viewFeedback:B,editFeedback:G,analyzeFeedback:V,deleteFeedback:H,saveFeedback:J,cancelEdit:N,resetForm:Y,triggerAnalyzeAll:Z,triggerForceReanalyze:ee}}},M=a(1241);const q=(0,M.A)(P,[["render",S],["__scopeId","data-v-468f5785"]]);var j=q}}]);
//# sourceMappingURL=801.a81e20bd.js.map